<!DOCTYPE html>
<html ng-app='devstudy'>
<head>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<title>nacyot의 프로그래밍 이야기 :: 알아두면 도움이 되는 55가지 루비 기법</title>
<link href="../../stylesheets/all.css" media="all" rel="stylesheet" type="text/css" />
<script src="../../javascripts/all.js" type="text/javascript"></script>
</head>
<body>

<div class='mini-wall'>
<div class='profile'>
<a href="/"><img class='img-rounded profile_image' src='/images/nacyot.jpeg'>
</a>
</div>
</div>
<div class='row'>
<div class='col-lg-2 col-md-1 col-sm-1 col-xs-1'></div>
<div class='col-lg-8 col-md-10 col-sm-10 col-xs-10'>
<div class='main'>
<div class='articles'>
<div class='article'>
<span class='date'>
Nov 24 2013
</span>
<h1 class='title'>
<a href="./">알아두면 도움이 되는 55가지 루비 기법</a>
</h1>
<div class='body'>
<p>이 글은 <a href="http://melborne.github.io/">kyoendo</a> 씨의 55 Trivia Notations you should know in Ruby 문서를 <a href="http://nacyot.com">nacyot</a>이 번역한 글입니다. 번역된 문서는 <a href="https://gist.github.com/nacyot/7624036">gist</a>에서 관리되고 있습니다. 원본은 <a href="http://melborne.github.io/2013/03/04/ruby-trivias-you-should-know-4/">여기</a>에서 찾아볼 수 있으며 <a href="http://creativecommons.org/licenses/by-nc/2.1/jp/">cc-by-nc</a> 라이센스에 따라 공개되어있습니다. 번역본 또한 같은 라이센스를 따릅니다. 관련된 질문은 <a href="http://nacyot.com/guestbook">GuestBook</a>이나 <a href="mailto:propellerheaven@gmail.com">Email</a>으로 해주시기합니다.</p>



<hr>

<p>Ruby는 즐거운 언어입니다. Ruby를 사용하다보면 매뉴얼에도 나와있지 않은
&#39;<strong>작은 발견</strong>&#39;을 만나게 됩니다. 이러한 &#39;발견&#39;은 프로그램의 질이나
효율 개선에 직접적으로 연결되지 않을 지도 모릅니다. 좋기는 커녕 팀
단위로 프로그래밍을 하는 동안에는 사용하지 않는 게 좋을 지도
모릅니다. 하지만 다른 시각에서 생각해보면, 어떤 언어에 아직 모르는
영역이 남아있다는 건 이 언어에 대한 흥미를 잃지 않게 만들어주는 중요한
요인이라는 것도 의심의 여지가 없습니다. 즉 &#39;발견&#39;은 언어를 즐겁게 만들어줍니다 .</p>

<p>이 블로그에서는 &#39;알아두면 도움이 되는 루비 기법&#39;이라는 주제로 지금까지 3 편의 글을 써왔습니다.</p>

<blockquote>
<p><a href="http://melborne.github.com/2011/06/22/21-Ruby-21-Trivia-Notations-you-should-know-in-Ruby/">알아두면 도움이 되는 21가지 루비 기법</a></p>

<p><a href="http://melborne.github.com/2012/02/08/2-12-Ruby-12-Trivia-Notations-you-should-know-in-Ruby/">제 2탄! 알아두면 도움이 되는 12가지 루비 기법</a></p>

<p><a href="http://melborne.github.com/2012/04/26/ruby-trivias-you-should-know/">제 3탄! 알아두면 도움이 되는 12가지 루비 기법</a></p>
</blockquote>

<p>이 기법들은 인터넷에서 발견한 것, 트위터에서 배운 것, 스스로 발견한 것들을 모은 것들입니다. 이런 기법들을 접할 때마다 제 입에서는 &#39;아하&#39;, &#39;우와&#39; 같은 감탄사가 절로 나왔습니다.</p>

<p>여기서는 위에서 다룬 45개의 기법과 추가적으로 새로운 10가지 기법을
합쳐 55가지 기법을 소개합니다. 전체적인 내용을 재구성했으면 비교적
이해하기 쉬운 내용을 앞에 배치하고 약간 어려운 부분을 뒤에
배치했습니다. 몇몇 설명에 대해서는 좀 더 간결하게 수정했습니다. 여기서는 언어를
어떻게 사용해야할 것인가, 혹은 어떻게 읽기 쉬운 코드를 작성할 수
있을까 하는 어려운 문제는 제쳐두고 일단 재미나 보이는 기법들에 대해
이렇게 작성할 수 있구나 하면서 즐기셨으면 합니다. Ruby 버전은 1.9나 2.0을 대상으로 합니다.</p>

<hr>

<p>그리고 이 글은 E-Books으로도 출간되었습니다. 이 글을 E-Books 형식으로 천천히
음미하고 싶으신 분은 구입을 고려해주세요. epub 형식은 물론 Kindle에서
사용 가능한 mobi 형식도 포함되어 있습니다.</p>

<p><a href="http://melborne.github.io/books/">
  <img src="http://melborne.github.io/assets/images/2013/03/ruby_trivia_cover.png" alt="trivia" style="width:200px" />
</a></p>

<blockquote>
<p><a href="http://melborne.github.io/books/" title="M&#39;ELBORNE BOOKS">M&#39;ELBORNE BOOKS</a></p>
</blockquote>

<h3>1. Array 객체의 스택 메소드</h3>

<p>x
<code>Array#&lt;&lt;</code> 메소드는 인수를 하나만 받습니다만 <code>Array#push</code>는 여러개의
인수를 받을 수 있습니다. 또한 <code>Array#pop</code>는 한 번에 여러개의 값을 pop 할 수 있습니다.<code>Array#unshift</code> <code>Array#shift</code>도 마찬가지입니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">stack</span> <span class="o">=</span> <span class="o">[]</span>
</span><span id="line-2"> <span class="n">stack</span><span class="o">.</span><span class="n">push</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span> <span class="c1"># =&gt; [1, 2, 3]</span>
</span><span id="line-3"> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span> <span class="mi">2</span> <span class="c1"># =&gt; [2, 3]</span>
</span><span id="line-4"> <span class="n">stack</span> <span class="c1"># =&gt; [1]</span>
</span><span id="line-5"> <span class="n">stack</span><span class="o">.</span><span class="n">unshift</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span> <span class="c1"># =&gt; [4, 5, 6, 1]</span>
</span><span id="line-6"> <span class="n">stack</span><span class="o">.</span><span class="n">shift</span> <span class="mi">3</span> <span class="c1"># =&gt; [4, 5, 6]</span>
</span><span id="line-7"> <span class="n">stack</span> <span class="c1"># =&gt; [1]</span>
</span></pre></div>
<p>또한 특정 위치에서 여러개의 값을 가져올 때는 <code>Array#values_at</code>이 편리합니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">lang</span> <span class="o">=</span> <span class="sx">%w(ruby python perl haskell lisp scala)</span>
</span><span id="line-2"> <span class="n">lang</span><span class="o">.</span><span class="n">values_at</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span> <span class="c1"># =&gt; [&quot;ruby&quot;, &quot;perl&quot;, &quot;scala&quot;]</span>
</span></pre></div>
<p>이 메소드는 Hash 객체에서도 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">lang</span> <span class="o">=</span> <span class="p">{</span><span class="ss">ruby</span><span class="p">:</span><span class="s1">&#39;matz&#39;</span><span class="p">,</span> <span class="ss">python</span><span class="p">:</span><span class="s1">&#39;guido&#39;</span><span class="p">,</span> <span class="ss">perl</span><span class="p">:</span><span class="s1">&#39;larry&#39;</span><span class="p">,</span> <span class="ss">lisp</span><span class="p">:</span><span class="s1">&#39;mccarthy&#39;</span><span class="p">}</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">lang</span><span class="o">.</span><span class="n">values_at</span> <span class="ss">:ruby</span><span class="p">,</span> <span class="ss">:perl</span> <span class="c1"># =&gt; [&quot;matz&quot;, &quot;larry&quot;]</span>
</span></pre></div>
<h3>2. Kernel#Array</h3>

<p>서로 다른 타입을 가진 인수를 일괄적으로 처리할 때는 <code>Kernel#Array</code>가 편리합니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="nb">Array</span> <span class="mi">1</span> <span class="c1"># =&gt; [1]</span>
</span><span id="line-2"> <span class="nb">Array</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="o">]</span> <span class="c1"># =&gt; [1, 2]</span>
</span><span id="line-3"> <span class="nb">Array</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">5</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5]</span>
</span><span id="line-4">
</span><span id="line-5"> <span class="nb">require</span> <span class="s2">&quot;date&quot;</span>
</span><span id="line-6"> <span class="k">def</span> <span class="nf">int2month</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
</span><span id="line-7">   <span class="nb">Array</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span> <span class="s2">&quot;%B&quot;</span>  <span class="p">}</span>
</span><span id="line-8"> <span class="k">end</span>
</span><span id="line-9">
</span><span id="line-10"> <span class="n">int2month</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;March&quot;]</span>
</span><span id="line-11"> <span class="n">int2month</span><span class="p">(</span><span class="o">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="o">]</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;February&quot;, &quot;June&quot;, &quot;September&quot;]</span>
</span><span id="line-12"> <span class="n">int2month</span><span class="p">(</span><span class="mi">4</span><span class="o">.</span><span class="n">.</span><span class="mi">8</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;, &quot;August&quot;]</span>
</span></pre></div>
<h3>3. 요소 구분 콤마</h3>

<p>배열과 해시의 각 요소를 구분하는 기호로 콤마를 사용하는데 마지막 요소의 콤마는 무시됩니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="nb">p</span> <span class="n">designers</span> <span class="o">=</span> <span class="o">[</span>
</span><span id="line-2">                 <span class="s2">&quot;John McCarthy&quot;</span><span class="p">,</span>
</span><span id="line-3">                 <span class="s2">&quot;Yukihiro Matsumoto&quot;</span><span class="p">,</span>
</span><span id="line-4">                 <span class="s2">&quot;Larry Wall&quot;</span><span class="p">,</span>
</span><span id="line-5">                 <span class="s2">&quot;Alan Kay&quot;</span><span class="p">,</span>
</span><span id="line-6">                 <span class="s2">&quot;Martin Odersky&quot;</span><span class="p">,</span>
</span><span id="line-7">               <span class="o">]</span>
</span><span id="line-8">
</span><span id="line-9"> <span class="c1"># &gt;&gt; [&quot;John McCarthy&quot;, &quot;Yukihiro Matsumoto&quot;, &quot;Larry Wall&quot;, &quot;Alan Kay&quot;, &quot;Martin Odersky&quot;]</span>
</span><span id="line-10">
</span><span id="line-11"> <span class="nb">p</span> <span class="n">designers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="line-12">                 <span class="ss">:lisp</span> <span class="o">=&gt;</span> <span class="s2">&quot;John McCarthy&quot;</span><span class="p">,</span>
</span><span id="line-13">                 <span class="ss">:ruby</span> <span class="o">=&gt;</span> <span class="s2">&quot;Yukihiro Matsumoto&quot;</span><span class="p">,</span>
</span><span id="line-14">                 <span class="ss">:perl</span> <span class="o">=&gt;</span> <span class="s2">&quot;Larry Wall&quot;</span><span class="p">,</span>
</span><span id="line-15">                 <span class="ss">:smalltalk</span> <span class="o">=&gt;</span> <span class="s2">&quot;Alan Kay&quot;</span><span class="p">,</span>
</span><span id="line-16">                 <span class="ss">:scala</span> <span class="o">=&gt;</span> <span class="s2">&quot;Martin Odersky&quot;</span><span class="p">,</span>
</span><span id="line-17">               <span class="p">}</span>
</span><span id="line-18">
</span><span id="line-19"> <span class="c1"># &gt;&gt; {:lisp=&gt;&quot;John McCarthy&quot;, :ruby=&gt;&quot;Yukihiro Matsumoto&quot;, :perl=&gt;&quot;Larry Wall&quot;, :smalltalk=&gt;&quot;Alan Kay&quot;, :scala=&gt;&quot;Martin Odersky&quot;}</span>
</span></pre></div>
<p>요소를 자주 추가/삭제하거나 파일에서 eval을 할 때 유용합니다.</p>

<h3>4. 해시 리터럴</h3>

<p>Ruby 1.9에는 새로운 해시 리터럴이 추가되었지만, 예전 방식과 혼용해서 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">designers1</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="line-2">               <span class="ss">:lisp</span> <span class="o">=&gt;</span> <span class="s2">&quot;John McCarthy&quot;</span><span class="p">,</span>
</span><span id="line-3">               <span class="ss">:ruby</span> <span class="o">=&gt;</span> <span class="s2">&quot;Yukihiro Matsumoto&quot;</span><span class="p">,</span>
</span><span id="line-4">               <span class="ss">:perl</span> <span class="o">=&gt;</span> <span class="s2">&quot;Larry Wall&quot;</span><span class="p">,</span>
</span><span id="line-5">               <span class="ss">:smalltalk</span> <span class="o">=&gt;</span> <span class="s2">&quot;Alan Kay&quot;</span><span class="p">,</span>
</span><span id="line-6">               <span class="ss">:&#39;C++&#39;</span> <span class="o">=&gt;</span>  <span class="s2">&quot;Bjarne Stroustrup&quot;</span><span class="p">,</span>
</span><span id="line-7">             <span class="p">}</span>
</span><span id="line-8">
</span><span id="line-9"> <span class="n">designers2</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="line-10">               <span class="ss">java</span><span class="p">:</span> <span class="s2">&quot;James Gosling&quot;</span><span class="p">,</span>
</span><span id="line-11">               <span class="ss">python</span><span class="p">:</span> <span class="s2">&quot;Guido van Rossum&quot;</span><span class="p">,</span>
</span><span id="line-12">               <span class="ss">javascript</span><span class="p">:</span> <span class="s2">&quot;Brendan Eich&quot;</span><span class="p">,</span>
</span><span id="line-13">               <span class="ss">scala</span><span class="p">:</span> <span class="s2">&quot;Martin Odersky&quot;</span><span class="p">,</span>
</span><span id="line-14">             <span class="p">}</span>
</span><span id="line-15">
</span><span id="line-16"> <span class="n">designers</span> <span class="o">=</span> <span class="n">designers1</span><span class="o">.</span><span class="n">merge</span> <span class="n">designers2</span>
</span><span id="line-17">  <span class="c1"># =&gt; {:lisp=&gt;&quot;John McCarthy&quot;, :ruby=&gt;&quot;Yukihiro Matsumoto&quot;, :perl=&gt;&quot;Larry Wall&quot;, :smalltalk=&gt;&quot;Alan Kay&quot;, :&quot;C++&quot;=&gt;&quot;Bjarne Stroustrup&quot;, :java=&gt;&quot;James Gosling&quot;, :python=&gt;&quot;Guido van Rossum&quot;, :javascript=&gt;&quot;Brendan Eich&quot;, :scala=&gt;&quot;Martin Odersky&quot;}</span>
</span></pre></div>
<h3>5. Enumerable#each<em>with</em>object</h3>

<p>Enumerable#inject는 편리한 메소드지만 블록에서 조건은 지정을 하는 경우에도 각 반복에서 결과값이 중첩될 객체가 리턴되는 것이 보장되어야만 합니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">designers</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="o">[]</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">mem</span><span class="p">,</span> <span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="nb">name</span><span class="p">)</span><span class="o">|</span> <span class="n">mem</span> <span class="o">&lt;&lt;</span> <span class="o">[</span><span class="nb">name</span><span class="p">,</span><span class="n">lang</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">lang</span><span class="o">[</span><span class="sr">/l/</span><span class="o">]</span><span class="p">;</span> <span class="n">mem</span> <span class="p">}</span>
</span><span id="line-2">  <span class="c1"># =&gt; [&quot;John McCarthy/lisp&quot;, &quot;Larry Wall/perl&quot;, &quot;Alan Kay/smalltalk&quot;, &quot;Martin Odersky/scala&quot;]</span>
</span></pre></div>
<p>블록 마지막의 &#39;; mem&#39;부분입니다.</p>

<p><code>Enumerable#each_with_object</code>를 이러한 문제를 사용하면 간단히 해결할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">designers</span><span class="o">.</span><span class="n">each_with_object</span><span class="p">(</span><span class="o">[]</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="nb">name</span><span class="p">),</span> <span class="n">mem</span><span class="o">|</span> <span class="n">mem</span> <span class="o">&lt;&lt;</span> <span class="o">[</span><span class="nb">name</span><span class="p">,</span><span class="n">lang</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">lang</span><span class="o">[</span><span class="sr">/l/</span><span class="o">]</span> <span class="p">}</span>
</span><span id="line-2">  <span class="c1"># =&gt; [&quot;John McCarthy/lisp&quot;, &quot;Larry Wall/perl&quot;, &quot;Alan Kay/smalltalk&quot;, &quot;Martin Odersky/scala&quot;]</span>
</span></pre></div>
<p>이름이 길어서 가능하면 사용하고 싶지 않습니다만...</p>

<h3>6. splat 전개</h3>

<p>Ruby에서 알파벳 배열을 만들 때는 보통 아래와 같은 방법을 사용합니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">20</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]</span>
</span><span id="line-2"> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">.</span><span class="s1">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span> <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span>
</span><span id="line-3"> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span> <span class="o">+</span> <span class="p">(</span><span class="mi">20</span><span class="o">.</span><span class="n">.</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]</span>
</span></pre></div>
<p>이러한 표현은 <code>*</code>(splat) 전개를 사용해 아래와 같이 바꿔쓸 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="o">[*</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">20</span><span class="o">]</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]</span>
</span><span id="line-2"> <span class="o">[*</span><span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">.</span><span class="s1">&#39;m&#39;</span><span class="o">]</span> <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;]</span>
</span><span id="line-3"> <span class="o">[*</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">10</span><span class="p">,</span> <span class="o">*</span><span class="mi">20</span><span class="o">.</span><span class="n">.</span><span class="mi">30</span><span class="o">]</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]</span>
</span></pre></div>
<h3>7. 전치 콜론</h3>

<p>문자열을 심볼로 변환할 때는 일반적으로, String#intern이나
String#to_sym 메소드를 사용합니다만 문자열 리터럴에 앞에 콜론을 놓는
방법도 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="s1">&#39;goodbye&#39;</span><span class="o">.</span><span class="n">intern</span> <span class="c1"># =&gt; :goodbye</span>
</span><span id="line-2"> <span class="s1">&#39;goodbye&#39;</span><span class="o">.</span><span class="n">to_sym</span> <span class="c1"># =&gt; :goodbye</span>
</span><span id="line-3">
</span><span id="line-4"> <span class="ss">:&#39;goodbye&#39;</span> <span class="c1"># =&gt; :goodbye</span>
</span><span id="line-5">
</span><span id="line-6"> <span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;goodbye&#39;</span>
</span><span id="line-7"> <span class="ss">:&quot;</span><span class="si">#{</span><span class="n">a</span><span class="si">}</span><span class="ss">&quot;</span> <span class="c1"># =&gt; :goodbye</span>
</span></pre></div>
<h3>8. Enumerator#with_index</h3>

<p>임의의 리스트를 표준 출력할 때 각 리스트의 순서를 나타내는 인덱스 숫자가 필요할 때 일반적으로 <code>Enumerator#with_index</code>를 사용합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">names</span> <span class="o">=</span> <span class="no">Module</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span id="line-2"><span class="n">names</span><span class="o">.</span><span class="n">each_with_index</span> <span class="p">{</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">&quot;%d: %s&quot;</span> <span class="o">%</span> <span class="o">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">name</span><span class="o">]</span> <span class="p">}</span>
</span><span id="line-3"><span class="c1"># &gt;&gt; 1: Object</span>
</span><span id="line-4"><span class="c1"># &gt;&gt; 2: Module</span>
</span><span id="line-5"><span class="c1"># &gt;&gt; 3: Class</span>
</span><span id="line-6"><span class="c1"># &gt;&gt; 4: Kernel</span>
</span><span id="line-7"><span class="c1"># &gt;&gt; 5: NilClass</span>
</span><span id="line-8"><span class="c1"># &gt;&gt; 6: NIL</span>
</span><span id="line-9"><span class="c1"># &gt;&gt; 7: Data</span>
</span><span id="line-10"><span class="c1"># &gt;&gt; 8: TrueClass</span>
</span><span id="line-11"><span class="c1"># &gt;&gt; 9: TRUE</span>
</span><span id="line-12"><span class="c1"># &gt;&gt; 10: FalseClass</span>
</span></pre></div>
<p><code>i+1</code>를 사용하는 게 영 맘에 들지 않습니다. 여기에 공감하시는 분들을 위해 <code>Enumerator#with_index</code> 메소드가 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">names</span> <span class="o">=</span> <span class="no">Module</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span><span id="line-2"><span class="n">names</span><span class="o">.</span><span class="n">each</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">&quot;%d: %s&quot;</span> <span class="o">%</span> <span class="o">[</span><span class="n">i</span><span class="p">,</span> <span class="nb">name</span><span class="o">]</span> <span class="p">}</span>
</span><span id="line-3"><span class="c1"># &gt;&gt; 1: Object</span>
</span><span id="line-4"><span class="c1"># &gt;&gt; 2: Module</span>
</span><span id="line-5"><span class="c1"># &gt;&gt; 3: Class</span>
</span><span id="line-6"><span class="c1"># &gt;&gt; 4: Kernel</span>
</span><span id="line-7"><span class="c1"># &gt;&gt; 5: NilClass</span>
</span><span id="line-8"><span class="c1"># &gt;&gt; 6: NIL</span>
</span><span id="line-9"><span class="c1"># &gt;&gt; 7: Data</span>
</span><span id="line-10"><span class="c1"># &gt;&gt; 8: TrueClass</span>
</span><span id="line-11"><span class="c1"># &gt;&gt; 9: TRUE</span>
</span><span id="line-12"><span class="c1"># &gt;&gt; 10: FalseClass</span>
</span></pre></div>
<p>with_index는 index의 offset을 인수로 받습니다. comparable한 객체를 받아주면 더욱 좋겠습니다만.</p>

<h3>9. Integer#times</h3>

<p><code>times</code>는 특정 횟수만큼 반복하고 싶을 때 사용합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">you_said</span> <span class="o">=</span> <span class="s1">&#39;てぶくろ&#39;</span>
</span><span id="line-2"><span class="mi">6</span><span class="o">.</span><span class="n">times</span> <span class="p">{</span> <span class="nb">puts</span> <span class="n">you_said</span><span class="o">.</span><span class="n">reverse!</span><span class="p">}</span> <span class="c1"># =&gt; 6</span>
</span><span id="line-3"><span class="c1"># &gt;&gt; ろくぶて</span>
</span><span id="line-4"><span class="c1"># &gt;&gt; てぶくろ</span>
</span><span id="line-5"><span class="c1"># &gt;&gt; ろくぶて</span>
</span><span id="line-6"><span class="c1"># &gt;&gt; てぶくろ</span>
</span><span id="line-7"><span class="c1"># &gt;&gt; ろくぶて</span>
</span><span id="line-8"><span class="c1"># &gt;&gt; てぶくろ</span>
</span></pre></div>
<p>times는 블록을 받지 않으면 Enumerator를 리턴합니다. 따라서 여러개의
객체를 생성할 때 사용할 수 있습니다. 20개의 RGB 컬러 샘플을 만든다고 해보죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="mi">20</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">[</span><span class="nb">rand</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span><span class="o">]</span> <span class="p">}</span> <span class="c1"># =&gt; [[45, 190, 194], [94, 43, 125], [6, 104, 181], [144, 92, 114], [34, 161, 214], [96, 69, 241], [216, 246, 133], [6, 237, 131], [194, 95, 214], [177, 252, 202], [184, 149, 142], [184, 166, 45], [41, 108, 115], [176, 100, 138], [124, 213, 89], [173, 123, 34], [137, 31, 47], [54, 92, 186], [118, 239, 217], [150, 184, 240]]</span>
</span></pre></div>
<h3>10. String#succ / Integer#succ</h3>

<p>Excel과 같이 A에서 부터 차례대로 문자로된 인덱스를 생성하려면 어떻게
해야할까요?최근에 비슷한 문제를 접했습니다. Ruby에선 <code>String#succ</code> 또는 <code>next</code>가 있으니 간단히 해결 가능합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;@&#39;</span>
</span><span id="line-2"><span class="mi">60</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">col</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">succ</span> <span class="p">}</span> <span class="c1"># =&gt; [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;, &quot;AA&quot;, &quot;AB&quot;, &quot;AC&quot;, &quot;AD&quot;, &quot;AE&quot;, &quot;AF&quot;, &quot;AG&quot;, &quot;AH&quot;, &quot;AI&quot;, &quot;AJ&quot;, &quot;AK&quot;, &quot;AL&quot;, &quot;AM&quot;, &quot;AN&quot;, &quot;AO&quot;, &quot;AP&quot;, &quot;AQ&quot;, &quot;AR&quot;, &quot;AS&quot;, &quot;AT&quot;, &quot;AU&quot;, &quot;AV&quot;, &quot;AW&quot;, &quot;AX&quot;, &quot;AY&quot;, &quot;AZ&quot;, &quot;BA&quot;, &quot;BB&quot;, &quot;BC&quot;, &quot;BD&quot;, &quot;BE&quot;, &quot;BF&quot;, &quot;BG&quot;, &quot;BH&quot;]</span>
</span></pre></div>
<h3>11. Comparable.between?</h3>

<p>값이 특정 범위 안에 있는 지 여부를 판단할 때 사용됩니다. 보통은 다음과 같이 사용합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">pos</span> <span class="o">=</span> <span class="mi">48</span>
</span><span id="line-2"><span class="n">status</span> <span class="o">=</span>
</span><span id="line-3">  <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">pos</span> <span class="o">&amp;&amp;</span> <span class="n">pos</span> <span class="o">&lt;=</span> <span class="mi">50</span>
</span><span id="line-4">    <span class="ss">:you_are_in</span>
</span><span id="line-5">  <span class="k">else</span>
</span><span id="line-6">    <span class="ss">:you_are_out</span>
</span><span id="line-7">  <span class="k">end</span>
</span><span id="line-8"><span class="n">status</span> <span class="c1"># =&gt; :you_are_in</span>
</span></pre></div>
<p>이렇게 짜놓고 CoffeeScript를 보면 분한 마음이 듭니다. 하지만 안심해주세요. Ruby에는 <code>between?</code> 메소드가 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">pos</span> <span class="o">=</span> <span class="mi">48</span>
</span><span id="line-2"><span class="n">status</span> <span class="o">=</span>
</span><span id="line-3">  <span class="k">if</span> <span class="n">pos</span><span class="o">.</span><span class="n">between?</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
</span><span id="line-4">    <span class="ss">:you_are_in</span>
</span><span id="line-5">  <span class="k">else</span>
</span><span id="line-6">    <span class="ss">:you_are_out</span>
</span><span id="line-7">  <span class="k">end</span>
</span><span id="line-8"><span class="n">status</span> <span class="c1"># =&gt; :you_are_in</span>
</span><span id="line-9">
</span><span id="line-10"><span class="n">pos</span> <span class="o">=</span> <span class="s1">&#39;D&#39;</span>
</span><span id="line-11"><span class="n">grade</span> <span class="o">=</span>
</span><span id="line-12">  <span class="k">if</span> <span class="n">pos</span><span class="o">.</span><span class="n">between?</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)</span>
</span><span id="line-13">    <span class="ss">:you_are_good!</span>  <span class="k">else</span>
</span><span id="line-14">    <span class="ss">:try_again!</span>  <span class="k">end</span>
</span><span id="line-15"><span class="n">grade</span> <span class="c1"># =&gt; :try_again!</span>
</span></pre></div>
<p>저는 case 파 입니다만...</p>
<div class="highlight"><pre><span id="line-1"><span class="n">pos</span> <span class="o">=</span> <span class="mi">48</span>
</span><span id="line-2"><span class="n">status</span> <span class="o">=</span>
</span><span id="line-3">  <span class="k">case</span> <span class="n">pos</span>
</span><span id="line-4">  <span class="k">when</span> <span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="mi">50</span>
</span><span id="line-5">    <span class="ss">:you_are_in</span>
</span><span id="line-6">  <span class="k">else</span>
</span><span id="line-7">    <span class="ss">:you_are_out</span>
</span><span id="line-8">  <span class="k">end</span>
</span><span id="line-9"><span class="n">status</span> <span class="c1"># =&gt; :you_are_in</span>
</span></pre></div>
<h3>12. Array#first/last</h3>

<p><code>Array#first/last</code>는 가져올 요소의 수를 인수로 받습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">arr</span> <span class="o">=</span> <span class="o">[*</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">100</span><span class="o">]</span>
</span><span id="line-2"><span class="n">arr</span><span class="o">.</span><span class="n">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">arr</span><span class="o">.</span><span class="n">last</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 96, 97, 98, 99, 100]</span>
</span></pre></div>
<p>Range 객체에서도 같은 메소드를 지원하고 있으니, 위의 예제는 아래와 같이 작성할 수도 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">range</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">100</span><span class="p">)</span>
</span><span id="line-2"><span class="n">range</span><span class="o">.</span><span class="n">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">range</span><span class="o">.</span><span class="n">last</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 96, 97, 98, 99, 100]</span>
</span></pre></div>
<h3>13. 변수 nil 초기화</h3>

<p>여러 변수를 <code>nil</code>으로 초기화하려는 경우에 어떻게 하시나요?이렇게
하시나요?</p>
<div class="highlight"><pre><span id="line-1"><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="o">[</span><span class="kp">nil</span><span class="o">]</span> <span class="o">*</span> <span class="mi">10</span>
</span><span id="line-2">
</span><span id="line-3"><span class="o">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="o">].</span><span class="n">all?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
</span></pre></div>
<p>하지만 다중 대입을 할 때는 값이 없으면 nil이 지정되므로 아래 코드면 충분합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="kp">nil</span>
</span><span id="line-2">
</span><span id="line-3"><span class="o">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="o">].</span><span class="n">all?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
</span></pre></div>
<h3>14. 해시 키</h3>

<p>해시 리터럴은 다음과 같이 작성합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="p">{</span><span class="ss">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">c</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="ss">a</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="ss">e</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span> <span class="c1"># =&gt; {:a=&gt;4, :b=&gt;2, :c=&gt;3, :e=&gt;5}</span>
</span></pre></div>
<p>눈치 채셨나요?실수로 키를 중복해서 사용해도 에러는 발생하지 않습니다.</p>

<p>특히 배열을 해시로 변환할 때는 주의가 필요합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">arr</span> <span class="o">=</span> <span class="o">[</span><span class="ss">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">b</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">c</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="ss">a</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="ss">e</span><span class="p">:</span> <span class="mi">5</span><span class="o">]</span>
</span><span id="line-2"><span class="no">Hash</span><span class="o">[</span> <span class="o">*</span><span class="n">arr</span> <span class="o">]</span> <span class="c1"># =&gt; {:a=&gt;4, :b=&gt;2, :c=&gt;3, :e=&gt;5}</span>
</span></pre></div>
<h3>15. 메소드 인수의 인수</h3>

<p>Ruby에서 인수를 받는 메소드를 호출할 때는 괄호를 생략할 수 있습니다만, 인수가 심볼일 때는 메소드 이름과 인수 사이의 공백도 생략할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="n">sym</span><span class="p">)</span>
</span><span id="line-2">   <span class="vi">@name</span> <span class="o">=</span> <span class="n">sym</span>
</span><span id="line-3"> <span class="k">end</span>
</span><span id="line-4">
</span><span id="line-5"> <span class="nb">name</span><span class="ss">:charlie</span> <span class="c1"># =&gt; :charlie</span>
</span></pre></div>
<p>이렇게 작성하면 더욱 선언적으로 보입니다.</p>

<p>하지만 이걸 변수에 넣거나 puts로 출력하는 경우엔 제대로 읽어들이지 못 하기 때문에 한정적인 방법이라고 할 수 있습니다.</p>

<p>또한 * &amp;의 뒤의 스페이스는 무시되므로 아래와 같이 작성할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">def</span> <span class="nf">teach_me</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="o">*</span> <span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span> <span class="n">block</span><span class="p">)</span>
</span><span id="line-2">   <span class="n">google</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="o">*</span> <span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span> <span class="n">block</span><span class="p">)</span>
</span><span id="line-3"> <span class="k">end</span>
</span><span id="line-4">
</span><span id="line-5"> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">*</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span>
</span><span id="line-6"> <span class="n">c</span> <span class="c1"># =&gt; [3,4]</span>
</span></pre></div>
<p>그래서 어쨌다는 걸까요...</p>

<h3>16. 부정</h3>

<p>부정의 의미로 사용되는 <code>!</code> 혹은 <code>not</code>이 맘에 드시지 않는 분? </p>

<p>그렇다면 <code>BaiscObject#!</code>가 있습니다!</p>
<div class="highlight"><pre><span id="line-1"> <span class="kp">true</span><span class="o">.!</span><span class="c1"># =&gt; false</span>
</span><span id="line-2"> <span class="kp">false</span><span class="o">.!</span><span class="c1"># =&gt; true</span>
</span><span id="line-3"> <span class="mi">1</span><span class="o">.!</span><span class="c1"># =&gt; false</span>
</span><span id="line-4"> <span class="s1">&#39;hello&#39;</span><span class="o">.!.!</span><span class="c1"># =&gt; true</span>
</span></pre></div>
<p>...</p>

<p>다음으로 넘어가죠...</p>

<h3>17. % 노테이션</h3>

<p>String#%을 사용하면 문자열을 </p>
<div class="highlight"><pre><span id="line-1"> <span class="n">lang</span> <span class="o">=</span> <span class="o">[</span><span class="ss">:ruby</span><span class="p">,</span> <span class="ss">:java</span><span class="o">]</span>
</span><span id="line-2"> <span class="s2">&quot;I love %s, not %s&quot;</span> <span class="o">%</span> <span class="n">lang</span> <span class="c1"># =&gt; &quot;I love ruby, not java&quot;</span>
</span></pre></div>
<p>뿐만 아니라 해시도 받을 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">lang</span> <span class="o">=</span> <span class="p">{</span><span class="ss">a</span><span class="p">:</span> <span class="ss">:java</span><span class="p">,</span> <span class="ss">b</span><span class="p">:</span> <span class="ss">:ruby</span><span class="p">}</span>
</span><span id="line-2"> <span class="s2">&quot;I love %{b}, not %{a}&quot;</span> <span class="o">%</span> <span class="n">lang</span> <span class="c1"># =&gt; &quot;I love ruby, not java&quot;</span>
</span></pre></div>
<h3>18. 문자열 분리</h3>

<p>문자열을 각 문자 별로 분리할 때는 <code>String#split</code>나 <code>String#chars</code> 메소드를 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">alpha</span> <span class="o">=</span> <span class="s2">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>
</span><span id="line-2"> <span class="n">alpha</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sr">//</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span>
</span><span id="line-3">
</span><span id="line-4"> <span class="n">alpha</span><span class="o">.</span><span class="n">chars</span><span class="o">.</span><span class="n">to_a</span> <span class="c1"># =&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span>
</span></pre></div>
<p>또한 ruby 2.0에선 chars 메소드를 사용한 후에 별도로 to_a를 호출해주지 않아도 됩니다.</p>

<p>하지만 문자열을 여러개의 문자를 기준으로 분리할 때는 <code>String#scan</code>이 편리합니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">alpha</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/.../</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;, &quot;pqr&quot;, &quot;stu&quot;, &quot;vwx&quot;]</span>
</span><span id="line-2"> <span class="n">alpha</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/.{1,3}/</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;, &quot;pqr&quot;, &quot;stu&quot;, &quot;vwx&quot;, &quot;yz&quot;]</span>
</span><span id="line-3">
</span><span id="line-4"> <span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;12345678&#39;</span>
</span><span id="line-5"> <span class="k">def</span> <span class="nc">number</span><span class="o">.</span><span class="nf">comma_value</span>
</span><span id="line-6">   <span class="n">reverse</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/.{1,3}/</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reverse</span>
</span><span id="line-7"> <span class="k">end</span>
</span><span id="line-8"> <span class="n">number</span><span class="o">.</span><span class="n">comma_value</span> <span class="c1"># =&gt; &quot;12,345,678&quot;</span>
</span></pre></div>
<h3>19. Array#*</h3>

<p><code>Array#*</code>에 정수를 넘겨주면 배열을 해당하는 수만큼 반복한 배열을 리턴합니다만, 문자열을 넘겨주면 문자열을 조인하고 그 사이에 해당하는 문자열로 연결해줍니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span> <span class="o">*</span> <span class="mi">3</span> <span class="c1"># =&gt; [1, 2, 3, 1, 2, 3, 1, 2, 3]</span>
</span><span id="line-2">
</span><span id="line-3"> <span class="o">[</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">]</span> <span class="o">*</span> <span class="s1">&#39;-&#39;</span> <span class="c1"># =&gt; &quot;2009-1-10&quot;</span>
</span></pre></div>
<p>그럼 이 지식을 활용해 다음 예제에서 x의 출력을 맞춰보세요!</p>
<div class="highlight"><pre><span id="line-1"><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="sx">%w(1 2 3 4 5)</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">x</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span>
</span><span id="line-4">
</span><span id="line-5"><span class="nb">puts</span> <span class="n">x</span>
</span></pre></div>
<h3>20. Array#uniq</h3>

<p>배열에서 중복된 값들을 제외할 때 <code>Array#uniq</code> 메소드를 사용하곤합니다. 이 때 uniq 메소드에 블록을 넘겨 조건을 지정할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="no">Designer</span> <span class="o">=</span> <span class="no">Struct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:lang</span><span class="p">)</span>
</span><span id="line-2"> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;matz&#39;</span> <span class="o">=&gt;</span> <span class="ss">:ruby</span><span class="p">,</span> <span class="s1">&#39;kay&#39;</span> <span class="o">=&gt;</span> <span class="ss">:smalltalk</span><span class="p">,</span> <span class="s1">&#39;gosling&#39;</span> <span class="o">=&gt;</span> <span class="ss">:java</span><span class="p">,</span> <span class="s1">&#39;dhh&#39;</span> <span class="o">=&gt;</span> <span class="ss">:ruby</span><span class="p">}</span>
</span><span id="line-3"> <span class="n">designers</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">to_a</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">lang</span><span class="o">|</span> <span class="no">Designer</span><span class="o">[</span><span class="nb">name</span><span class="p">,</span> <span class="n">lang</span><span class="o">]</span> <span class="p">}</span>
</span><span id="line-4">
</span><span id="line-5"> <span class="n">designers</span> <span class="c1"># =&gt; [#&lt;struct Designer name=&quot;matz&quot;, lang=:ruby&gt;, #&lt;struct Designer name=&quot;kay&quot;, lang=:smalltalk&gt;, #&lt;struct Designer name=&quot;gosling&quot;, lang=:java&gt;, #&lt;struct Designer name=&quot;dhh&quot;, lang=:ruby&gt;]</span>
</span><span id="line-6">
</span><span id="line-7"> <span class="n">designers</span><span class="o">.</span><span class="n">uniq</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:name</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;matz&quot;, &quot;kay&quot;, &quot;gosling&quot;, &quot;dhh&quot;]</span>
</span><span id="line-8"> <span class="n">designers</span><span class="o">.</span><span class="n">uniq</span><span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">d</span><span class="o">.</span><span class="n">lang</span> <span class="p">}</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:name</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;matz&quot;, &quot;kay&quot;, &quot;gosling&quot;]</span>
</span></pre></div>
<p>아, 그렇죠. No 19의 정답은 &quot;142435&quot;입니다.</p>

<h3>21. 모든 배열 요소의 동일 여부 확인</h3>

<p>배열의 모든 요소가 같은지 확인할 때 Array#uniq 메소드를 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">].</span><span class="n">uniq</span><span class="o">.</span><span class="n">size</span><span class="o">==</span><span class="mi">1</span> <span class="c1"># =&gt; true</span>
</span><span id="line-2"><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">].</span><span class="n">uniq</span><span class="o">.</span><span class="n">size</span><span class="o">==</span><span class="mi">1</span> <span class="c1"># =&gt; false</span>
</span></pre></div>
<p>조건을 지정하고 싶을 땐 uniq에 블록을 넘겨주는 방법이 좋습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="sx">%w(street retest setter tester)</span><span class="o">.</span><span class="n">uniq</span> <span class="p">{</span> <span class="o">|</span><span class="n">w</span><span class="o">|</span> <span class="n">w</span><span class="o">.</span><span class="n">chars</span><span class="o">.</span><span class="n">sort</span> <span class="p">}</span><span class="o">.</span><span class="n">size</span><span class="o">==</span><span class="mi">1</span> <span class="c1"># =&gt; true</span>
</span></pre></div>
<h3>22. 문자열 리스트 %w</h3>

<p>문자열 리스트를 만들 때 %w를 사용하면 편리합니다. 이 때 공백 문자를 포함하고 싶으면 백슬래시로 이스케이프 해줄 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="n">designers</span> <span class="o">=</span> <span class="sx">%w(John\ McCarthy Yukihiro\ Matsumoto Larry\ Wall Alan\ Kay Martin\ Odersky)</span>
</span><span id="line-2"> <span class="n">designers</span> <span class="c1"># =&gt; [&quot;John McCarthy&quot;, &quot;Yukihiro Matsumoto&quot;, &quot;Larry Wall&quot;, &quot;Alan Kay&quot;, &quot;Martin Odersky&quot;]</span>
</span></pre></div>
<h3>23. 동적 상속</h3>

<p>Ruby 클래스의 상속은 <code>&lt;</code> 기호를 사용하는데 이때 우변에 클래스 상수나 클래스를 리턴하는 식을 지정할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">class</span> <span class="nc">Male</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">laugh</span>
</span><span id="line-3">    <span class="s1">&#39;Ha ha ha!&#39;</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5"> <span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"> <span class="k">class</span> <span class="nc">Female</span>
</span><span id="line-8">  <span class="k">def</span> <span class="nf">laugh</span>
</span><span id="line-9">    <span class="s1">&#39;Fu fu fu..&#39;</span>
</span><span id="line-10">  <span class="k">end</span>
</span><span id="line-11"> <span class="k">end</span>
</span><span id="line-12">
</span><span id="line-13"> <span class="k">class</span> <span class="nc">Me</span> <span class="o">&lt;</span> <span class="o">[</span><span class="no">Male</span><span class="p">,</span> <span class="no">Female</span><span class="o">][</span><span class="nb">rand</span> <span class="mi">2</span><span class="o">]</span>
</span><span id="line-14"> <span class="k">end</span>
</span><span id="line-15">
</span><span id="line-16"> <span class="no">Me</span><span class="o">.</span><span class="n">superclass</span> <span class="c1"># =&gt; Female</span>
</span><span id="line-17"> <span class="no">Me</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">laugh</span> <span class="c1"># =&gt; &#39;Fu fu fu..&#39;</span>
</span></pre></div>
<p>환경에 따라 IO를 바꾸는 예제입니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">def</span> <span class="nf">io</span><span class="p">(</span><span class="n">env</span><span class="o">=</span><span class="ss">:development</span><span class="p">)</span>
</span><span id="line-2">   <span class="n">env</span><span class="o">==</span><span class="ss">:test</span> <span class="p">?</span><span class="no">StringIO</span> <span class="p">:</span> <span class="no">IO</span>
</span><span id="line-3"> <span class="k">end</span>
</span><span id="line-4">
</span><span id="line-5"> <span class="n">env</span> <span class="o">=</span> <span class="ss">:test</span>
</span><span id="line-6">
</span><span id="line-7"> <span class="k">class</span> <span class="nc">MyIO</span> <span class="o">&lt;</span> <span class="n">io</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
</span><span id="line-8"> <span class="k">end</span>
</span><span id="line-9">
</span><span id="line-10"> <span class="no">MyIO</span><span class="o">.</span><span class="n">superclass</span> <span class="c1">#=&gt; StringIO</span>
</span></pre></div>
<p>즉 Ruby에서는 조건에 따라 상속하려는 클래스를 동적으로 바꿀 수 있습니다.</p>

<h3>24. 대문자 메소드</h3>

<p>Ruby는 메소드 이름으로 영어 소문자를 사용하는데 영어 대문자도 사용할
수 있습니다. 대문자 메소드는 상수처럼 보이기도 합니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">class</span> <span class="nc">Google</span>
</span><span id="line-2">   <span class="k">def</span> <span class="nf">URL</span>
</span><span id="line-3">     <span class="s1">&#39;www.google.com&#39;</span>
</span><span id="line-4">   <span class="k">end</span>
</span><span id="line-5">   <span class="kp">private</span> <span class="ss">:URL</span>
</span><span id="line-6">
</span><span id="line-7">   <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span><span id="line-8">     <span class="n">get</span><span class="p">(</span> <span class="no">URL</span><span class="p">(),</span> <span class="n">word</span><span class="p">)</span>
</span><span id="line-9">   <span class="k">end</span>
</span><span id="line-10"> <span class="k">end</span>
</span></pre></div>
<p>상수는 속상된 서브 클래스에서도 참조 가능하지만 이를 비공개로 하고
싶을 때는 어떨까요. 바로 이럴 때 대문자 메소드를 이용해보는 겁니다.</p>

<p>인수가 없을 때도 괄호가 생략 불가능한 단점은 있지만, 관련된 복잡한 상수를 정의할 때도 편리하게 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">class</span> <span class="nc">Google</span>
</span><span id="line-2">   <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="ss">:us</span><span class="p">)</span>
</span><span id="line-3">     <span class="n">get</span><span class="p">(</span> <span class="no">URL</span><span class="p">(</span><span class="n">code</span><span class="p">),</span> <span class="n">word</span> <span class="p">)</span>
</span><span id="line-4">   <span class="k">end</span>
</span><span id="line-5">
</span><span id="line-6">   <span class="k">def</span> <span class="nf">URL</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
</span><span id="line-7">     <span class="p">{</span> <span class="ss">us</span><span class="p">:</span> <span class="s1">&#39;www.google.com&#39;</span><span class="p">,</span>
</span><span id="line-8">       <span class="ss">ja</span><span class="p">:</span> <span class="s1">&#39;www.google.co.jp&#39;</span> <span class="p">}</span><span class="o">[</span><span class="n">code</span><span class="o">]</span>
</span><span id="line-9">   <span class="k">end</span>
</span><span id="line-10">   <span class="kp">private</span> <span class="ss">:URL</span>
</span></pre></div>
<p>「상수 메소드」라는 이름은 어떨까요.</p>

<h3>25. 함수 부분 적용</h3>

<p>비슷한 메소드를 여러번 만드는 건 DRY 원칙에 위배됩니다.<code>Proc#curry</code>를
사용하면 이러한 문제를 피할 수 있습니다. 계절 판정 예제입니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="nb">require</span> <span class="s2">&quot;date&quot;</span>
</span><span id="line-2">
</span><span id="line-3"> <span class="n">season</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="n">range</span><span class="p">,</span><span class="n">date</span><span class="p">{</span> <span class="n">range</span><span class="o">.</span><span class="n">include?</span><span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">mon</span> <span class="p">}</span><span class="o">.</span><span class="n">curry</span>
</span><span id="line-4">
</span><span id="line-5"> <span class="n">is_spring</span> <span class="o">=</span> <span class="n">season</span><span class="o">[</span><span class="mi">4</span><span class="o">.</span><span class="n">.</span><span class="mi">6</span><span class="o">]</span>
</span><span id="line-6"> <span class="n">is_summer</span> <span class="o">=</span> <span class="n">season</span><span class="o">[</span><span class="mi">7</span><span class="o">.</span><span class="n">.</span><span class="mi">9</span><span class="o">]</span>
</span><span id="line-7"> <span class="n">is_autumn</span> <span class="o">=</span> <span class="n">season</span><span class="o">[</span><span class="mi">10</span><span class="o">.</span><span class="n">.</span><span class="mi">12</span><span class="o">]</span>
</span><span id="line-8"> <span class="n">is_winter</span> <span class="o">=</span> <span class="n">season</span><span class="o">[</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">3</span><span class="o">]</span>
</span><span id="line-9">
</span><span id="line-10"> <span class="n">is_autumn</span><span class="o">[</span><span class="s1">&#39;11/23&#39;</span><span class="o">]</span> <span class="c1"># =&gt; true</span>
</span><span id="line-11"> <span class="n">is_summer</span><span class="o">[</span><span class="s1">&#39;1/1&#39;</span><span class="o">]</span> <span class="c1"># =&gt; false</span>
</span></pre></div>
<p>이럴 때 변수명에 <code>?</code>를 사용할 수 있으면 좋겠다는 생각을 해봅니다.</p>

<h3>26. Proc에 의한 case 조건</h3>

<p>Proc은 call 메소드를 사용해 실행할 수 있는데 이 메소드는
<code>Proc#===</code>라는 다른 이름을 가지고 있습니다. 앞선 계절 판정 함수를 case
식으로 작성하면 아래와 같습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">for</span> <span class="n">date</span> <span class="k">in</span> <span class="sx">%w(2/4 11/23 6/14 8/3)</span>
</span><span id="line-2">   <span class="n">act</span> <span class="o">=</span> 
</span><span id="line-3">     <span class="k">case</span> <span class="n">date</span>
</span><span id="line-4">     <span class="k">when</span> <span class="n">is_spring</span><span class="p">;</span> <span class="s1">&#39;Wake up!&#39;</span>
</span><span id="line-5">     <span class="k">when</span> <span class="n">is_summer</span><span class="p">;</span> <span class="s1">&#39;Cool down!&#39;</span>
</span><span id="line-6">     <span class="k">when</span> <span class="n">is_autumn</span><span class="p">;</span> <span class="s1">&#39;Read!&#39;</span>
</span><span id="line-7">     <span class="k">when</span> <span class="n">is_winter</span><span class="p">;</span> <span class="s1">&#39;Sleep!&#39;</span>
</span><span id="line-8">     <span class="k">end</span>
</span><span id="line-9">   <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">date</span><span class="si">}</span><span class="s2"> =&gt; </span><span class="si">#{</span><span class="n">act</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="line-10"> <span class="k">end</span>
</span><span id="line-11"> <span class="c1"># &gt;&gt; 2/4 =&gt; Sleep! # &gt;&gt; 11/23 =&gt; Read! # &gt;&gt; 6/14 =&gt; Wake up! # &gt;&gt; 8/3 =&gt; Cool down!</span>
</span></pre></div>
<p>인수가 넘어가는 게 암묵적으로 이루어져서 case 식이 깔끔하게 느껴집니다.</p>

<h3>27. Struct 클래스</h3>

<p>속성만 있는 클래스를 생성할 때는 <code>Struct</code>가 편리합니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="k">module</span> <span class="nn">Fortune</span>
</span><span id="line-2">   <span class="k">class</span> <span class="nc">Teller</span>
</span><span id="line-3">     <span class="nb">require</span> <span class="s2">&quot;date&quot;</span>
</span><span id="line-4">     <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">ask</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">occupation</span><span class="p">)</span>
</span><span id="line-5">       <span class="no">Date</span><span class="o">.</span><span class="n">today</span><span class="o">.</span><span class="n">next_day</span><span class="p">(</span><span class="nb">rand</span> <span class="mi">10</span><span class="p">)</span>
</span><span id="line-6">     <span class="k">end</span>
</span><span id="line-7">   <span class="k">end</span>
</span><span id="line-8"> <span class="k">end</span>
</span><span id="line-9">
</span><span id="line-10"> <span class="k">class</span> <span class="nc">Person</span> <span class="o">&lt;</span> <span class="no">Struct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span><span class="p">,</span> <span class="ss">:occupation</span><span class="p">)</span>
</span><span id="line-11">   <span class="k">def</span> <span class="nf">length_of_life</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span id="line-12">     <span class="p">(</span><span class="no">Fortune</span><span class="o">::</span><span class="no">Teller</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">occupation</span><span class="p">)</span> <span class="o">-</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date</span><span class="p">))</span><span class="o">.</span><span class="n">to_i</span>
</span><span id="line-13">   <span class="k">end</span>
</span><span id="line-14"> <span class="k">end</span>
</span><span id="line-15">
</span><span id="line-16"> <span class="n">charlie</span> <span class="o">=</span> <span class="no">Person</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="ss">:programmer</span><span class="p">)</span>
</span><span id="line-17"> <span class="n">charlie</span><span class="o">.</span><span class="n">length_of_life</span><span class="p">(</span><span class="s1">&#39;2013/3/1&#39;</span><span class="p">)</span> <span class="c1"># =&gt; 6</span>
</span></pre></div>
<p>Struct.new는 블록을 받을 수 있어 아래와 같이 사용할 수도 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="no">Person</span> <span class="o">=</span> <span class="no">Struct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span><span class="p">,</span> <span class="ss">:occupation</span><span class="p">)</span> <span class="k">do</span>
</span><span id="line-2">   <span class="k">def</span> <span class="nf">length_of_life</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
</span><span id="line-3">     <span class="p">(</span><span class="no">Fortune</span><span class="o">::</span><span class="no">Teller</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">occupation</span><span class="p">)</span> <span class="o">-</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">date</span><span class="p">))</span><span class="o">.</span><span class="n">to_i</span>
</span><span id="line-4">   <span class="k">end</span>
</span><span id="line-5"> <span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"> <span class="n">charlie</span> <span class="o">=</span> <span class="no">Person</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="ss">:programmer</span><span class="p">)</span>
</span><span id="line-8"> <span class="n">charlie</span><span class="o">.</span><span class="n">length_of_life</span><span class="p">(</span><span class="s1">&#39;2013/3/1&#39;</span><span class="p">)</span> <span class="c1"># =&gt; 3</span>
</span></pre></div>
<h3>28. Struct의 기본 값</h3>

<p>한 번 더 Struct 이야기입니다. 이번엔 Beverage 객체를 만들어 보겠습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">Beverage</span> <span class="o">&lt;</span> <span class="no">Struct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:cost</span><span class="p">)</span>
</span><span id="line-2"><span class="k">end</span>
</span><span id="line-3">
</span><span id="line-4"><span class="c1"># 혹은 Beverage = Struct.new(:name, :cost)</span>
</span><span id="line-5">
</span><span id="line-6"><span class="n">starbucks</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:staba</span><span class="p">,</span> <span class="mi">430</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;struct Beverage name=:staba, cost=430&gt;</span>
</span><span id="line-7"><span class="n">heineken</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:heineken</span><span class="p">,</span> <span class="mi">580</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;struct Beverage name=:heineken, cost=580&gt;</span>
</span></pre></div>
<p>여기서 <code>new</code>에 인수를 넘기지 않으면 속성값에는 nil이 지정됩니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="no">Beverage</span><span class="o">.</span><span class="n">new</span> <span class="c1"># =&gt; #&lt;struct Beverage name=nil, cost=nil&gt;</span>
</span></pre></div>
<p>가능하면 클래스와 마찬가지로 기본 값을 설정하고 싶죠. 그럴 땐 이렇게 합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">Beverage</span> <span class="o">&lt;</span> <span class="no">Struct</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:cost</span><span class="p">)</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="o">=</span><span class="ss">:water</span><span class="p">,</span> <span class="n">cost</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="line-3">    <span class="k">super</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5"><span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"><span class="n">starbucks</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:staba</span><span class="p">,</span> <span class="mi">430</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;struct Beverage name=:staba, cost=430&gt;</span>
</span><span id="line-8"><span class="n">heineken</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:heineken</span><span class="p">,</span> <span class="mi">580</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;struct Beverage name=:heineken, cost=580&gt;</span>
</span><span id="line-9">
</span><span id="line-10"><span class="n">water</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span> <span class="c1"># =&gt; #&lt;struct Beverage name=:water, cost=0&gt;</span>
</span></pre></div>
<h3>29. retry와 인수 기본값</h3>

<p>rescue를 사용할 때는 <code>retry</code>를 사용해서 메소드를 재실행할 수 있습니다.
이를 메소드 인수의 기본 값과 연관지어 편리하게 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="nb">require</span> <span class="s2">&quot;date&quot;</span>
</span><span id="line-2"> <span class="k">def</span> <span class="nf">last_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">last</span><span class="o">=[</span><span class="mi">28</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="o">]</span><span class="p">)</span>
</span><span id="line-3">   <span class="n">d</span> <span class="o">=</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span> <span class="n">date</span>
</span><span id="line-4">   <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">mon</span><span class="p">,</span> <span class="n">last</span><span class="o">.</span><span class="n">pop</span><span class="p">)</span><span class="o">.</span><span class="n">day</span> <span class="k">rescue</span> <span class="k">retry</span>
</span><span id="line-5"> <span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"> <span class="n">last_date</span> <span class="s1">&#39;2013/6/1&#39;</span> <span class="c1"># =&gt; 30</span>
</span><span id="line-8"> <span class="n">last_date</span> <span class="s1">&#39;2012/2/20&#39;</span> <span class="c1"># =&gt; 29</span>
</span><span id="line-9"> <span class="n">last_date</span> <span class="s1">&#39;2013/2&#39;</span> <span class="c1"># =&gt; 28</span>
</span></pre></div>
<p>이 예제에서는 31일부터 Date 객체를 생성해 예외가 발생하면 retry를 통해 전 날의 Date객체 생성을 시도합니다.</p>

<p>사실 마지막 날이 알고 싶은 거면 아래 코드면 충분합니다만...</p>
<div class="highlight"><pre><span id="line-1"> <span class="no">Date</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">day</span> <span class="c1"># =&gt; 28</span>
</span></pre></div>
<h3>30. Array#zip</h3>

<p><code>Array#zip</code>을 알고계시나요?여러개의 배열을 한 줄 한 줄 늘여놓고 열단위로 묶어주는 메소드입니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">zip</span><span class="p">(</span><span class="o">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span><span class="p">)</span> <span class="c1"># =&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]</span>
</span><span id="line-2">
</span><span id="line-3"><span class="o">[</span><span class="ss">:A</span><span class="p">,</span> <span class="ss">:B</span><span class="p">,</span> <span class="ss">:C</span><span class="o">].</span><span class="n">zip</span><span class="p">(</span><span class="o">[</span><span class="ss">:E</span><span class="p">,</span> <span class="ss">:F</span><span class="p">,</span> <span class="ss">:G</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="ss">:H</span><span class="p">,</span> <span class="ss">:I</span><span class="p">,</span> <span class="ss">:J</span><span class="o">]</span><span class="p">)</span> <span class="c1"># =&gt; [[:A, :E, :H], [:B, :F, :I], [:C, :G, :J]]</span>
</span></pre></div>
<p>zip은 일반적으로 하나나 그보다 많은 배열들을 인수로 받는데 값이 연속되는 경우엔 Range를 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">zip</span><span class="p">(</span><span class="mi">4</span><span class="o">.</span><span class="n">.</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="o">.</span><span class="n">.</span><span class="mi">9</span><span class="p">)</span> <span class="c1"># =&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]</span>
</span><span id="line-2">
</span><span id="line-3"><span class="o">[</span><span class="ss">:A</span><span class="p">,</span> <span class="ss">:B</span><span class="p">,</span> <span class="ss">:C</span><span class="o">].</span><span class="n">zip</span><span class="p">(</span><span class="ss">:E</span><span class="o">.</span><span class="n">.</span><span class="ss">:G</span><span class="p">,</span> <span class="ss">:H</span><span class="o">.</span><span class="n">.</span><span class="ss">:J</span><span class="p">)</span> <span class="c1"># =&gt; [[:A, :E, :H], [:B, :F, :I], [:C, :G, :J]]</span>
</span></pre></div>
<p>또한 zip은 블록을 넘겨받을 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">zip</span><span class="p">(</span><span class="mi">4</span><span class="o">.</span><span class="n">.</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="o">.</span><span class="n">.</span><span class="mi">9</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">xyz</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">xyz</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span> <span class="p">}</span> <span class="c1"># =&gt; nil</span>
</span><span id="line-2"><span class="c1"># &gt;&gt; 12</span>
</span><span id="line-3"><span class="c1"># &gt;&gt; 15</span>
</span><span id="line-4"><span class="c1"># &gt;&gt; 18</span>
</span><span id="line-5">
</span><span id="line-6"><span class="o">[</span><span class="ss">:A</span><span class="p">,</span> <span class="ss">:B</span><span class="p">,</span> <span class="ss">:C</span><span class="o">].</span><span class="n">zip</span><span class="p">(</span><span class="ss">:E</span><span class="o">.</span><span class="n">.</span><span class="ss">:G</span><span class="p">,</span> <span class="ss">:H</span><span class="o">.</span><span class="n">.</span><span class="ss">:J</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">xyz</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">xyz</span><span class="o">.</span><span class="n">join</span> <span class="p">}</span> <span class="c1"># =&gt; nil</span>
</span><span id="line-7"><span class="c1"># &gt;&gt; AEH</span>
</span><span id="line-8"><span class="c1"># &gt;&gt; BFI</span>
</span><span id="line-9"><span class="c1"># &gt;&gt; CGJ</span>
</span></pre></div>
<p>단 리턴값은 nil이므로 블록에서 처리하는 방법으로밖에 사용할 수 없습니다.</p>

<h3>31. Enumerable#zip</h3>

<p>zip 메소드는 Enumerable 클래스에도 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">zip</span><span class="p">(</span><span class="mi">4</span><span class="o">.</span><span class="n">.</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="o">.</span><span class="n">.</span><span class="mi">9</span><span class="p">)</span> <span class="c1"># =&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]</span>
</span><span id="line-2">
</span><span id="line-3"><span class="p">(</span><span class="ss">:A</span><span class="o">.</span><span class="n">.</span><span class="ss">:C</span><span class="p">)</span><span class="o">.</span><span class="n">zip</span><span class="p">(</span><span class="ss">:E</span><span class="o">.</span><span class="n">.</span><span class="ss">:G</span><span class="p">,</span> <span class="ss">:H</span><span class="o">.</span><span class="n">.</span><span class="ss">:J</span><span class="p">)</span> <span class="c1"># =&gt; [[:A, :E, :H], [:B, :F, :I], [:C, :G, :J]]</span>
</span></pre></div>
<p>Struct도 Enumerable 객체이므로 아래와 같은 것도 가능합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">water</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span>  <span class="c1"># =&gt; #&lt;struct Beverage name=:water, cost=0&gt;</span>
</span><span id="line-2"><span class="n">starbucks</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:staba</span><span class="p">,</span> <span class="mi">430</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;struct Beverage name=:staba, cost=430&gt;</span>
</span><span id="line-3"><span class="n">heineken</span> <span class="o">=</span> <span class="no">Beverage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="ss">:heineken</span><span class="p">,</span> <span class="mi">580</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;struct Beverage name=:heineken, cost=580&gt;</span>
</span><span id="line-4">
</span><span id="line-5"><span class="n">water</span><span class="o">.</span><span class="n">zip</span><span class="p">(</span><span class="n">starbucks</span><span class="p">,</span> <span class="n">heineken</span><span class="p">)</span> <span class="c1"># =&gt; [[:water, :staba, :heineken], [0, 430, 580]]</span>
</span></pre></div>
<h3>32. ARGF</h3>

<p>ARFG는 훌륭합니다. 이는 커맨드 라인 인수를 파일명으로 받아들여 지정된
파일 객체를 가져옵니다. 그런데 이 객체의 클래스가 뭔지 알고계시나요? 이를 확인하려면 class 메소드를 보내보면 되겠죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="no">ARGF</span><span class="o">.</span><span class="n">class</span> <span class="c1"># =&gt; ARGF.class</span>
</span></pre></div>
<p>네. 정답은 <code>ARFG.class</code>입니다.</p>

<p>그럼 new 하면 ARGF가 만들어질까요.</p>
<div class="highlight"><pre><span id="line-1"><span class="no">ARGF</span><span class="o">.</span><span class="n">class</span> <span class="c1"># =&gt; ARGF.class</span>
</span><span id="line-2"><span class="no">MYARGF</span> <span class="o">=</span> <span class="no">ARGF</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">new</span>  <span class="c1"># =&gt; ARGF</span>
</span><span id="line-3"><span class="no">MYARGF</span><span class="o">.</span><span class="n">class</span> <span class="c1"># =&gt; ARGF.class</span>
</span><span id="line-4">
</span><span id="line-5"><span class="nb">puts</span> <span class="no">MYARGF</span><span class="o">.</span><span class="n">filename</span>
</span></pre></div>
<p>만들어집니다! 하지만 제대로 작동하지 않습니다.</p>
<div class="highlight"><pre><span id="line-1">% ruby argf_test.rb abc.txt
</span><span id="line-2">-
</span></pre></div>
<p>칫!</p>

<h3>33. Object#tap</h3>

<p><code>tap</code>은 이 블록의 평가 결과를 버리는 희안한 메소드인데 그 결과가
필요할 때가 있습니다. 그럴 땐 break를 사용하면 됩니다. (thanks to knu 님).</p>
<div class="highlight"><pre><span id="line-1"><span class="n">average</span> <span class="o">=</span> <span class="o">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">65</span><span class="o">].</span><span class="n">tap</span> <span class="p">{</span> <span class="o">|</span><span class="n">sco</span><span class="o">|</span> <span class="k">break</span> <span class="n">sco</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span> <span class="o">/</span> <span class="n">sco</span><span class="o">.</span><span class="n">size</span> <span class="p">}</span> <span class="c1"># =&gt; 69</span>
</span></pre></div>
<p>컵라면을 좋아하는 당신께 아래의 코드를 헌정합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="nb">puts</span> <span class="s2">&quot;Eat!&quot;</span><span class="o">.</span><span class="n">tap</span> <span class="p">{</span> <span class="nb">sleep</span> <span class="mi">180</span> <span class="p">}</span> <span class="c1"># 3분 후에 &#39;Eat!&#39;</span>
</span></pre></div>
<h3>34. 사용하지 않는 변수</h3>

<p>배열 데이터를 그냥 버리고 싶을 때가 있죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">header</span><span class="p">,</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="no">DATA</span><span class="o">.</span><span class="n">each_line</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">line</span><span class="o">.</span><span class="n">chomp</span><span class="o">.</span><span class="n">split</span> <span class="p">}</span>
</span><span id="line-2"><span class="n">header</span> <span class="c1"># =&gt; [&quot;name&quot;, &quot;age&quot;, &quot;job&quot;]</span>
</span><span id="line-3"><span class="n">data</span> <span class="c1"># =&gt; [[&quot;charlie&quot;, &quot;12&quot;, &quot;:programmer&quot;], [&quot;tommy&quot;, &quot;17&quot;, &quot;:student&quot;], [&quot;nick&quot;, &quot;27&quot;, &quot;:doctor&quot;]]</span>
</span><span id="line-4">
</span><span id="line-5"><span class="cp">__END__</span>
</span><span id="line-6"><span class="cp">name age job</span>
</span><span id="line-7"><span class="cp">charlie 12 :programmer</span>
</span><span id="line-8"><span class="cp">tommy 17 :student</span>
</span><span id="line-9"><span class="cp">nick 27 :doctor</span>
</span></pre></div>
<p>그런데 여기서 <code>header</code> 변수를 사용하지 않으면 경고가 나옵니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">header</span><span class="p">,</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="no">DATA</span><span class="o">.</span><span class="n">each_line</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">line</span><span class="o">.</span><span class="n">chomp</span><span class="o">.</span><span class="n">split</span> <span class="p">}</span> <span class="c1"># !&gt; assigned but unused variable - header</span>
</span><span id="line-2"><span class="n">data</span> <span class="c1"># =&gt; [[&quot;charlie&quot;, &quot;12&quot;, &quot;:programmer&quot;], [&quot;tommy&quot;, &quot;17&quot;, &quot;:student&quot;], [&quot;nick&quot;, &quot;27&quot;, &quot;:doctor&quot;]]</span>
</span></pre></div>
<p>이를 피하기 위해 변수명을 <code>_</code>(밑줄)로 지정합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">_</span><span class="p">,</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="no">DATA</span><span class="o">.</span><span class="n">each_line</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">line</span><span class="o">.</span><span class="n">chomp</span><span class="o">.</span><span class="n">split</span> <span class="p">}</span>
</span><span id="line-2"><span class="n">data</span> <span class="c1"># =&gt; [[&quot;charlie&quot;, &quot;12&quot;, &quot;:programmer&quot;], [&quot;tommy&quot;, &quot;17&quot;, &quot;:student&quot;], [&quot;nick&quot;, &quot;27&quot;, &quot;:doctor&quot;]]</span>
</span></pre></div>
<p>만약 이미 2.0을 사용하고 계시다면 변수 이름 앞에 <code>_</code>를 붙여주기만 하면 됩니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">_header</span><span class="p">,</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="no">DATA</span><span class="o">.</span><span class="n">each_line</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">line</span><span class="o">.</span><span class="n">chomp</span><span class="o">.</span><span class="n">split</span> <span class="p">}</span>
</span></pre></div>
<h3>35. 파일 뽑아내기</h3>

<p>여러 파일이 있을 때 특정한 조건에 맞는 딱 하나의 파일을 찾아내 다른
변수에 저장하고 싶다고 해보죠. <code>Array#delete</code> 메소드를 사용하면 될 것 같은데, 실제론 어떨까요.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">files</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Gemfile&#39;</span><span class="p">,</span> <span class="s1">&#39;LICENSE.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;README.md&#39;</span><span class="p">,</span> <span class="s1">&#39;Rakefile&#39;</span><span class="p">,</span> <span class="s1">&#39;bin&#39;</span><span class="p">,</span> <span class="s1">&#39;lib&#39;</span><span class="p">,</span> <span class="s1">&#39;maliq.gemspec&#39;</span><span class="p">,</span> <span class="s1">&#39;pkg&#39;</span><span class="p">,</span> <span class="s1">&#39;spec&#39;</span><span class="o">]</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">gemspec</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="sr">/\.gemspec$/</span><span class="p">)</span>
</span><span id="line-4"><span class="n">gemspec</span> <span class="c1"># =&gt; nil</span>
</span><span id="line-5"><span class="n">files</span> <span class="c1"># =&gt; [&quot;Gemfile&quot;, &quot;LICENSE.txt&quot;, &quot;README.md&quot;, &quot;Rakefile&quot;, &quot;bin&quot;, &quot;lib&quot;, &quot;maliq.gemspec&quot;, &quot;pkg&quot;, &quot;spec&quot;]</span>
</span></pre></div>
<p>안타깝지만 생각처럼 되지 않습니다. 이는 Array#delete가 <code>==</code>으로 동일 여부를 판단하기 때문입니다.</p>

<p>그렇다면 <code>Array#partition</code>과 다중 대입을 사용해보죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">gemspec</span><span class="p">,</span> <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">partition</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/\.gemspec$/</span><span class="p">)</span> <span class="p">}</span>
</span><span id="line-2"><span class="n">gemspec</span> <span class="c1"># =&gt; [&quot;maliq.gemspec&quot;]</span>
</span><span id="line-3"><span class="n">files</span>  <span class="c1"># =&gt; [&quot;Gemfile&quot;, &quot;LICENSE.txt&quot;, &quot;README.md&quot;, &quot;Rakefile&quot;, &quot;bin&quot;, &quot;lib&quot;, &quot;pkg&quot;, &quot;spec&quot;]</span>
</span></pre></div>
<p>다 된 것 같긴 한데 gemspec 파일을 배열로 돌려주는 게 조금 아쉽네요. 하지만 다중 대입 + 괄호를 사용하면 해결할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="p">(</span><span class="n">gemspec</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">),</span> <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="o">.</span><span class="n">partition</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/\.gemspec$/</span><span class="p">)</span> <span class="p">}</span>
</span><span id="line-2"><span class="n">gemspec</span> <span class="c1"># =&gt; &quot;maliq.gemspec&quot;</span>
</span><span id="line-3"><span class="n">files</span> <span class="c1"># =&gt; [&quot;Gemfile&quot;, &quot;LICENSE.txt&quot;, &quot;README.md&quot;, &quot;Rakefile&quot;, &quot;bin&quot;, &quot;lib&quot;, &quot;pkg&quot;, &quot;spec&quot;]</span>
</span></pre></div>
<h3>36. Symbol에 주석 사용하기</h3>

<p>심볼에도 주석을 달고 싶다고 생각해보신 적은 없나요? 그렇다면 이렇게 해보세요.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">sym</span> <span class="o">=</span> <span class="p">:</span><span class="c1">#this symbol is nice</span>
</span><span id="line-2"><span class="n">hello</span>
</span><span id="line-3">
</span><span id="line-4"><span class="n">sym</span> <span class="c1"># =&gt; :hello</span>
</span></pre></div>
<p>대체 이걸 어디에 쓰시려고...</p>

<h3>37. Kernel#loop</h3>

<p>끝없이 반복하고 싶은 경우엔 <code>Kernel#loop</code>에 블록을 넘겨주면 됩니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="nb">require</span> <span class="s2">&quot;prime&quot;</span>
</span><span id="line-2">
</span><span id="line-3"> <span class="n">prime</span> <span class="o">=</span> <span class="no">Prime</span><span class="o">.</span><span class="n">each</span>
</span><span id="line-4">
</span><span id="line-5"> <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="line-6"> <span class="kp">loop</span> <span class="k">do</span>
</span><span id="line-7">   <span class="nb">printf</span> <span class="s2">&quot;%d &quot;</span> <span class="o">%</span> <span class="n">prime</span><span class="o">.</span><span class="n">next</span>
</span><span id="line-8">   <span class="k">break</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">10</span>
</span><span id="line-9">   <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="line-10"> <span class="k">end</span>
</span><span id="line-11"> <span class="c1"># &gt;&gt; 2 3 5 7 11 13 17 19 23 29 31 37 </span>
</span></pre></div>
<p>여기선 loop에 블록을 넘기지 않으면 Enumerator가 리턴됩니다. 이를
이용하면 loop에 인덱스를 추가할 수 있습니다.( thanks to @no6v 님)</p>
<div class="highlight"><pre><span id="line-1"> <span class="kp">loop</span> <span class="c1"># =&gt; #&lt;Enumerator: main:loop&gt;</span>
</span><span id="line-2">
</span><span id="line-3"> <span class="kp">loop</span><span class="o">.</span><span class="n">with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">_</span><span class="p">,</span><span class="n">n</span><span class="o">|</span>
</span><span id="line-4">   <span class="nb">printf</span> <span class="s2">&quot;%d &quot;</span> <span class="o">%</span> <span class="n">prime</span><span class="o">.</span><span class="n">next</span>
</span><span id="line-5">   <span class="k">break</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">10</span>
</span><span id="line-6"> <span class="k">end</span>
</span><span id="line-7"> <span class="c1"># &gt;&gt; 2 3 5 7 11 13 17 19 23 29 31 37 </span>
</span></pre></div>
<p>블록의 첫번째 인수가 nil이 되어버립니다만.</p>

<h3>38. BasicObject#instance_eval</h3>

<p><code>instance_eval</code>은 객체 생성을 DSL처럼 할 때 자주 사용됩니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">Person</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="o">&amp;</span><span class="n">blk</span><span class="p">)</span>
</span><span id="line-3">    <span class="nb">instance_eval</span><span class="p">(</span><span class="o">&amp;</span><span class="n">blk</span><span class="p">)</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5">  <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</span><span id="line-6">    <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
</span><span id="line-7">  <span class="k">end</span>
</span><span id="line-8">  <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
</span><span id="line-9">    <span class="vi">@age</span> <span class="o">=</span> <span class="n">age</span>
</span><span id="line-10">  <span class="k">end</span>
</span><span id="line-11">  <span class="k">def</span> <span class="nf">job</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</span><span id="line-12">    <span class="vi">@job</span> <span class="o">=</span> <span class="n">job</span>
</span><span id="line-13">  <span class="k">end</span>
</span><span id="line-14">  <span class="k">def</span> <span class="nf">profile</span>
</span><span id="line-15">    <span class="o">[</span><span class="vi">@name</span><span class="p">,</span> <span class="vi">@age</span><span class="p">,</span> <span class="vi">@job</span><span class="o">]</span> <span class="o">*</span> <span class="s1">&#39;-&#39;</span>
</span><span id="line-16">  <span class="k">end</span>
</span><span id="line-17"><span class="k">end</span>
</span><span id="line-18">
</span><span id="line-19"><span class="n">t</span> <span class="o">=</span> <span class="no">Person</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span>
</span><span id="line-20">  <span class="nb">name</span> <span class="s1">&#39;Charlie&#39;</span>
</span><span id="line-21">  <span class="n">age</span>  <span class="mi">13</span>
</span><span id="line-22">  <span class="n">job</span>  <span class="ss">:programmer</span>
</span><span id="line-23"><span class="k">end</span>
</span><span id="line-24">
</span><span id="line-25"><span class="n">t</span><span class="o">.</span><span class="n">profile</span> <span class="c1"># =&gt; &quot;Charlie-13-programmer&quot;</span>
</span></pre></div>
<p>하지만 이러한 콘텍스트를 일시적으로 바꾸는 방법은 DSL이 아니라도
편리하게 사용할 수 있습니다. 테스트 결과의 평균값을 구해보죠. 우선은 일반적인 방법으로.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">scores</span> <span class="o">=</span> <span class="o">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">65</span><span class="o">]</span>
</span><span id="line-2"><span class="n">scores</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span> <span class="o">/</span> <span class="n">scores</span><span class="o">.</span><span class="n">size</span> <span class="c1"># =&gt; 69</span>
</span></pre></div>
<p>짧은 코드인데 scores 변수가 3번이나 나옵니다.</p>

<p>instance_eval을 사용하면 score를 사용하지 않을 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="o">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">65</span><span class="o">].</span><span class="n">instance_eval</span> <span class="p">{</span> <span class="n">inject</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span> <span class="o">/</span> <span class="n">size</span> <span class="p">}</span> <span class="c1"># =&gt; 69</span>
</span></pre></div>
<p>다음으로 표준편차 sd를 구해보죠. 우선은 일반적인 방법으로</p>
<div class="highlight"><pre><span id="line-1"><span class="n">scores</span> <span class="o">=</span> <span class="o">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">63</span><span class="p">,</span> <span class="mi">65</span><span class="o">]</span>
</span><span id="line-2"><span class="n">avg</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span> <span class="o">/</span> <span class="n">scores</span><span class="o">.</span><span class="n">size</span>
</span><span id="line-3"><span class="n">sigmas</span> <span class="o">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="p">(</span><span class="n">avg</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="p">}</span>
</span><span id="line-4"><span class="n">sd</span> <span class="o">=</span> <span class="no">Math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">sigmas</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="ss">:+</span><span class="p">)</span> <span class="o">/</span> <span class="n">scores</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="c1"># =&gt; 14.247806848775006</span>
</span></pre></div>
<p>instance<em>eval로.
```ruby
scores = [56, 87, 49, 75, 90, 63, 65]
sd = scores.instance</em>eval do
  avg = inject(:+) / size
  sigmas = map { |n| (avg - n)**2 }
  Math.sqrt(sigmas.inject(:+) / size)
end
sd # =&gt; 14.247806848775006
```</p>

<p>비슷한 변수를 블록 안에 집어넣는 것은 물론 블록에서 식이 정리되니 더 보기 좋지 않나요?</p>

<h3>39. 정규 표현식 : 이름 있는 참조</h3>

<p>정규 표현식 안에서 <code>()</code>를 부분 매치에 사용할 수 있습니다. 더욱이 이 매치에 이름을 붙이고 싶으면 <code>?\&lt;pattern\&gt;</code>을 사용하면 됩니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">langs</span> <span class="o">=</span> <span class="s2">&quot;python lisp ruby haskell erlang scala&quot;</span>
</span><span id="line-2"><span class="n">m</span> <span class="o">=</span> <span class="n">langs</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/(?&lt;lang&gt;\w+)/</span><span class="p">)</span> <span class="c1"># =&gt; #&lt;MatchData &quot;python&quot; lang:&quot;python&quot;&gt;</span>
</span><span id="line-3"><span class="n">m</span><span class="o">[</span><span class="s1">&#39;lang&#39;</span><span class="o">]</span> <span class="c1"># =&gt; &quot;python&quot;</span>
</span></pre></div>
<p>그리고 정규표현 리터럴을 좌변에 사용하면 이를 지역 변수처럼 사용할 수
있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">langs</span> <span class="o">=</span> <span class="s2">&quot;python lisp ruby haskell erlang scala&quot;</span>
</span><span id="line-2"><span class="k">if</span> <span class="sr">/(?&lt;most_fun_lang&gt;r\w+)/</span> <span class="o">=~</span> <span class="n">langs</span>
</span><span id="line-3">  <span class="nb">printf</span> <span class="s2">&quot;you should learn %s!&quot;</span><span class="p">,</span> <span class="n">most_fun_lang</span>
</span><span id="line-4"><span class="k">end</span>
</span><span id="line-5"><span class="c1"># &gt;&gt; you should learn ruby!</span>
</span></pre></div>
<h3>40. 정규표현:POSIX 문자 클래스</h3>

<p>Ruby 1.9에서 <code>\w</code>는 일본어에 매치하지 않습니다.1.9에서 일본어에도 매치시키기 위해서는 POSIX 문자 클래스 <code>word</code>를 사용하는 방법이 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">need_japanese</span> <span class="o">=</span> <span class="s2">&quot;this-日本語*is*_really_/</span><span class="se">\\</span><span class="s2">変わってる!&quot;</span>
</span><span id="line-2"><span class="n">need_japanese</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/\w+/</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;this&quot;, &quot;is&quot;, &quot;_really_&quot;]</span>
</span><span id="line-3"><span class="n">need_japanese</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/[[:word:]]+/</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;this&quot;, &quot;日本語&quot;, &quot;is&quot;, &quot;_really_&quot;, &quot;変わってる&quot;]</span>
</span></pre></div>
<h3>41. String#match</h3>

<p><code>String#match</code>는 MatchData 객체를 리턴하므로 다음과 같이 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">date</span> <span class="o">=</span> <span class="s2">&quot;2012february14&quot;</span>
</span><span id="line-2"><span class="n">m</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/\D+/</span><span class="p">)</span>
</span><span id="line-3"><span class="n">mon</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">post_match</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">pre_match</span>
</span><span id="line-4"><span class="s2">&quot;</span><span class="si">#{</span><span class="n">mon</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">day</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span> <span class="c1"># =&gt; &quot;February 14, 2012&quot;</span>
</span></pre></div>
<p>하지만 match는 블록을 받으므로 다음과 같이 사용해도 됩니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">date</span> <span class="o">=</span> <span class="s2">&quot;2012february14&quot;</span>
</span><span id="line-2"><span class="n">mon</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/\D+/</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">m</span><span class="o">|</span> <span class="o">[</span><span class="n">m</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">capitalize</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">post_match</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">pre_match</span><span class="o">]</span> <span class="p">}</span>
</span><span id="line-3"><span class="s2">&quot;</span><span class="si">#{</span><span class="n">mon</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">day</span><span class="si">}</span><span class="s2">, </span><span class="si">#{</span><span class="n">year</span><span class="si">}</span><span class="s2">&quot;</span> <span class="c1"># =&gt; &quot;February 14, 2012&quot;</span>
</span></pre></div>
<h3>42. String#unpack</h3>

<p>문자열을 정해진 길이를 기준으로 나누고 싶을 땐 어떻게 하는 게
좋을까요? 먼저 정규표현식을 사용해보죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">a_day</span> <span class="o">=</span> <span class="s1">&#39;20120214&#39;</span>
</span><span id="line-2"><span class="n">a_day</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/(.{4})(.{2})(.{2})/</span><span class="p">)</span><span class="o">.</span><span class="n">captures</span> <span class="c1"># =&gt; [&quot;2012&quot;, &quot;02&quot;, &quot;14&quot;]</span>
</span></pre></div>
<p><code>String#unpack</code>를 사용하면 좀 더 간단히 해결할 수 있습니다. (thanks to @no6v 님)</p>
<div class="highlight"><pre><span id="line-1"><span class="n">a_day</span> <span class="o">=</span> <span class="s1">&#39;20120214&#39;</span>
</span><span id="line-2"><span class="n">a_day</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;A4A2A2&#39;</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;2012&quot;, &quot;02&quot;, &quot;14&quot;]</span>
</span></pre></div>
<h3>43. Enumerable#each<em>with</em>object</h3>

<p>Enumerable#map 메소드를 활용하는 방법으로 블록 대신에 <code>&amp;</code>에 심볼을 붙이는 기술이 알려져 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">langs</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;ruby&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;lisp&quot;</span><span class="p">,</span> <span class="s2">&quot;haskell&quot;</span><span class="o">]</span>
</span><span id="line-2"><span class="n">langs</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:capitalize</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;Ruby&quot;, &quot;Python&quot;, &quot;Lisp&quot;, &quot;Haskell&quot;]</span>
</span></pre></div>
<p>하지만 이 기술은 인수를 받는 메소드는 사용할 수 없다는 문제가 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">langs</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;ruby&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;lisp&quot;</span><span class="p">,</span> <span class="s2">&quot;haskell&quot;</span><span class="o">]</span>
</span><span id="line-2"><span class="n">langs</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="ss">:+</span><span class="p">,</span> <span class="s1">&#39;ist&#39;</span><span class="p">)</span> <span class="c1"># =&gt; </span>
</span><span id="line-3"><span class="c1"># ~&gt; -:2:in `map&#39;: wrong number of arguments (2 for 0) (ArgumentError)</span>
</span><span id="line-4"><span class="c1"># ~&gt;    from -:2:in `&lt;main&gt;&#39;</span>
</span></pre></div>
<p>이럴 땐 <code>each_with_object</code> 메소드를 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">langs</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;ruby&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;lisp&quot;</span><span class="p">,</span> <span class="s2">&quot;haskell&quot;</span><span class="o">]</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">langs</span><span class="o">.</span><span class="n">each_with_object</span><span class="p">(</span><span class="s1">&#39;ist&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:+</span><span class="p">)</span> <span class="c1"># =&gt; [&quot;rubyist&quot;, &quot;pythonist&quot;, &quot;lispist&quot;, &quot;haskellist&quot;]</span>
</span><span id="line-4">
</span><span id="line-5"><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">each_with_object</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:+</span><span class="p">)</span> <span class="c1"># =&gt; [11, 12, 13]</span>
</span><span id="line-6"><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">each_with_object</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:**</span><span class="p">)</span> <span class="c1"># =&gt; [1, 4, 9, 16, 25]</span>
</span></pre></div>
<p>이름이 조금 길죠. 그것보다 네. 그냥 map에 블록을 넘기세요.</p>

<p>그리고 이런 방법도 있습니다. (thanks to @tmaeda 님)</p>
<div class="highlight"><pre><span id="line-1"><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">].</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="mi">10</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="ss">:+</span><span class="p">))</span> <span class="c1"># =&gt; [11, 12, 13]</span>
</span></pre></div>
<p>리시버와 인수가 역전되므로 용도는 한정적입니다만.</p>

<h3>44. Float::INFINITY</h3>

<p>임의의 수열을 만들고자 할 때 하지만 크기가 미리 정해지지 않는 경우가
있습니다. 일단은 <code>Enumerator</code>로 시도해보죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">sequence</span> <span class="o">=</span> <span class="no">Enumerator</span><span class="o">.</span><span class="n">new</span> <span class="p">{</span> <span class="o">|</span><span class="n">y</span><span class="o">|</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="kp">loop</span> <span class="p">{</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span><span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">sequence</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>
</span><span id="line-4"><span class="mi">100</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">sequence</span><span class="o">.</span><span class="n">next</span> <span class="p">}</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]</span>
</span></pre></div>
<p>단 <code>Enumerator</code>를 사용하지 않아도 비슷한 작업을 할 수 있는데, 이 때 무한을 의미하는 상수 <code>Float::INFINITY</code>를 사용합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">sequence</span> <span class="o">=</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="no">Float</span><span class="o">::</span><span class="no">INFINITY</span>
</span><span id="line-2"><span class="n">sequence</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>
</span><span id="line-3">
</span><span id="line-4"><span class="n">seq</span> <span class="o">=</span> <span class="n">sequence</span><span class="o">.</span><span class="n">to_enum</span>
</span><span id="line-5"><span class="mi">100</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">seq</span><span class="o">.</span><span class="n">next</span> <span class="p">}</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100]</span>
</span></pre></div>
<p>Infinity는 0으로 나눠서 얻을 수 있으니 아래와 같이 작성할 수도 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>
</span><span id="line-2">
</span><span id="line-3"><span class="mi">1</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">.</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="c1"># =&gt; [1.0, 2.5, 4.0, 5.5, 7.0, 8.5, 10.0, 11.5, 13.0, 14.5, 16.0, 17.5, 19.0, 20.5, 22.0, 23.5, 25.0, 26.5, 28.0, 29.5]</span>
</span></pre></div>
<h3>45. Enumerable#grep</h3>

<p>case의 동일성 판단은 <code>===</code> 메소드를 사용합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">temp</span> <span class="o">=</span> <span class="mi">85</span>
</span><span id="line-2"><span class="n">status</span> <span class="o">=</span>
</span><span id="line-3">  <span class="k">case</span> <span class="n">temp</span>
</span><span id="line-4">  <span class="k">when</span> <span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">40</span><span class="p">;</span>   <span class="ss">:low</span>
</span><span id="line-5">  <span class="k">when</span> <span class="mi">80</span><span class="o">.</span><span class="n">.</span><span class="mi">100</span><span class="p">;</span> <span class="ss">:Danger</span>
</span><span id="line-6">  <span class="k">else</span> <span class="ss">:ok</span>
</span><span id="line-7">  <span class="k">end</span>
</span><span id="line-8"><span class="n">status</span> <span class="c1"># =&gt; :Danger</span>
</span><span id="line-9">
</span><span id="line-10"><span class="k">class</span> <span class="nc">Trivia</span>
</span><span id="line-11"><span class="k">end</span>
</span><span id="line-12"><span class="n">t</span> <span class="o">=</span> <span class="no">Trivia</span><span class="o">.</span><span class="n">new</span>
</span><span id="line-13">
</span><span id="line-14"><span class="n">klass</span> <span class="o">=</span>
</span><span id="line-15">  <span class="k">case</span> <span class="n">t</span>
</span><span id="line-16">  <span class="k">when</span> <span class="nb">String</span><span class="p">;</span> <span class="s1">&#39;no good&#39;</span>
</span><span id="line-17">  <span class="k">when</span> <span class="nb">Array</span><span class="p">;</span>  <span class="s1">&#39;no no&#39;</span>
</span><span id="line-18">  <span class="k">when</span> <span class="no">Trivia</span><span class="p">;</span> <span class="s1">&#39;Yes!Trivia!&#39;</span>
</span><span id="line-19">  <span class="k">end</span>
</span><span id="line-20"><span class="n">klass</span> <span class="c1"># =&gt; &quot;Yes!Trivia!&quot;</span>
</span></pre></div>
<p>예는 <code>Range#===</code>와 <code>Module#===</code>를 사용한 동일성 판정입니다.</p>

<p>사실 <code>Enumerable#grep</code>에 의한 패턴 매치도 ===로 동일 여부를 판단합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">numbers</span> <span class="o">=</span> <span class="mi">5</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">to_a</span> <span class="c1"># =&gt; [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80]</span>
</span><span id="line-2"><span class="n">numbers</span><span class="o">.</span><span class="n">grep</span><span class="p">(</span><span class="mi">20</span><span class="o">.</span><span class="n">.</span><span class="mi">50</span><span class="p">)</span> <span class="c1"># =&gt; [20, 25, 30, 35, 40, 45, 50]</span>
</span><span id="line-3">
</span><span id="line-4"><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span> <span class="n">t5</span> <span class="o">=</span> <span class="s1">&#39;trivia&#39;</span><span class="p">,</span> <span class="no">Trivia</span><span class="o">.</span><span class="n">new</span><span class="p">,</span> <span class="o">[</span><span class="ss">:trivia</span><span class="o">]</span><span class="p">,</span> <span class="p">{</span><span class="ss">trivia</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span> <span class="no">Trivia</span><span class="o">.</span><span class="n">new</span>
</span><span id="line-5">
</span><span id="line-6"><span class="o">[</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span> <span class="n">t5</span><span class="o">].</span><span class="n">grep</span><span class="p">(</span><span class="no">Trivia</span><span class="p">)</span> <span class="c1"># =&gt; [#&lt;Trivia:0x000001008613b0&gt;, #&lt;Trivia:0x000001008610e0&gt;]</span>
</span></pre></div>
<h3>46. String#gsub</h3>

<p>문자열에서 나타나는 부분 문자열이 나타나는 회수가 필요한 경우가
있습니다. 보통은 <code>String#scan</code>을 사용하면 됩니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="no">DATA</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/hello/i</span><span class="p">)</span><span class="o">.</span><span class="n">count</span> <span class="c1"># =&gt; 48</span>
</span><span id="line-2">
</span><span id="line-3"><span class="cp">__END__</span>
</span><span id="line-4"><span class="cp">You say &quot;Yes&quot;, I say &quot;No&quot;.</span>
</span><span id="line-5"><span class="cp">You say &quot;Stop&quot; and I say &quot;Go, go, go&quot;.</span>
</span><span id="line-6"><span class="cp">Oh no.</span>
</span><span id="line-7"><span class="cp">You say &quot;Goodbye&quot; and I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-8"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-9"><span class="cp">I don&#39;t know why you say goodbye, I say hello.</span>
</span><span id="line-10"><span class="cp">I say &quot;High&quot;, you say &quot;Low&quot;.</span>
</span><span id="line-11"><span class="cp">You say &quot;Why?&quot; And I say &quot;I don&#39;t know&quot;.</span>
</span><span id="line-12"><span class="cp">Oh no.</span>
</span><span id="line-13"><span class="cp">You say &quot;Goodbye&quot; and I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-14"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-15"><span class="cp">(Hello, goodbye, hello, goodbye. Hello, goodbye.)</span>
</span><span id="line-16"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello&quot;.</span>
</span><span id="line-17"><span class="cp">(Hello, goodbye, hello, goodbye. Hello, goodbye. Hello, goodbye.)</span>
</span><span id="line-18"><span class="cp">Why, why, why, why, why, why, do you</span>
</span><span id="line-19"><span class="cp">Say &quot;Goodbye, goodbye, bye, bye&quot;.</span>
</span><span id="line-20"><span class="cp">Oh no.</span>
</span><span id="line-21"><span class="cp">You say &quot;Goodbye&quot; and I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-22"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-23"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello&quot;.</span>
</span><span id="line-24"><span class="cp">You say &quot;Yes&quot;, I say &quot;No&quot;.</span>
</span><span id="line-25"><span class="cp">(I say &quot;Yes&quot;, but I may mean &quot;No&quot;).</span>
</span><span id="line-26"><span class="cp">You say &quot;Stop&quot;, I say &quot;Go, go, go&quot;.</span>
</span><span id="line-27"><span class="cp">(I can stay still it&#39;s time to go).</span>
</span><span id="line-28"><span class="cp">Oh, oh no.</span>
</span><span id="line-29"><span class="cp">You say &quot;Goodbye&quot; and I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-30"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-31"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-32"><span class="cp">I don&#39;t know why you say &quot;Goodbye&quot;, I say &quot;Hello-wow, oh. Hello&quot;.</span>
</span><span id="line-33"><span class="cp">Hela, heba, helloa. Hela, heba, helloa. Hela, heba, helloa.</span>
</span><span id="line-34"><span class="cp">Hela, heba, helloa. (Hela.) Hela, heba, helloa. Hela, heba, helloa.</span>
</span><span id="line-35"><span class="cp">Hela, heba, helloa. Hela, heba, helloa. Hela, heba, helloa.</span>
</span></pre></div>
<p>훌륭한 가사네요.</p>

<p>하지만 <code>String#gsub</code>는 블록을 넘기지 않으면 Enumerator 객체를 리턴하니 같은 일을 할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="no">DATA</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/hello/i</span><span class="p">)</span><span class="o">.</span><span class="n">count</span> <span class="c1"># =&gt; 48</span>
</span><span id="line-2">
</span><span id="line-3"><span class="cp">__END__</span>
</span><span id="line-4"><span class="cp">You say &quot;Yes&quot;, I say &quot;No&quot;.</span>
</span><span id="line-5"><span class="cp">You say &quot;Stop&quot; and I say &quot;Go, go, go&quot;.</span>
</span><span id="line-6"><span class="cp">Oh no.</span>
</span><span id="line-7"><span class="cp">You say &quot;Goodbye&quot; and I say &quot;Hello, hello, hello&quot;.</span>
</span><span id="line-8"><span class="cp">....</span>
</span></pre></div>
<h3>47. 클래스 메소드 정의</h3>

<p>클래스나 모듈의 메소드를 정의할 때는 일반적으로 아래와 같이 합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">Calc</span>
</span><span id="line-2">  <span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="nb">self</span>
</span><span id="line-3">    <span class="k">def</span> <span class="nf">&gt;&gt;</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
</span><span id="line-4">      <span class="nb">eval</span> <span class="n">exp</span>
</span><span id="line-5">    <span class="k">end</span>
</span><span id="line-6">  <span class="k">end</span>
</span><span id="line-7"><span class="k">end</span>
</span><span id="line-8">
</span><span id="line-9"><span class="no">Calc</span> <span class="o">&gt;&gt;</span> <span class="s1">&#39;1 + 2&#39;</span> <span class="c1"># =&gt; 3</span>
</span><span id="line-10"><span class="no">Calc</span> <span class="o">&gt;&gt;</span> <span class="s1">&#39;10 ** 2&#39;</span> <span class="c1"># =&gt; 100</span>
</span></pre></div>
<p>바깥 쪽 클래스의 정의를 <code>Class.new</code>나 <code>Module.new</code>을 사용하면 다음과 같이 작성할 수도 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="o">&lt;&lt;</span> <span class="no">Calc</span> <span class="o">=</span> <span class="no">Class</span><span class="o">.</span><span class="n">new</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">&gt;&gt;</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
</span><span id="line-3">    <span class="nb">eval</span> <span class="n">exp</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5"><span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"><span class="no">Calc</span> <span class="o">&gt;&gt;</span> <span class="s1">&#39;123 / 4.0&#39;</span> <span class="c1"># =&gt; 30.75</span>
</span><span id="line-8"><span class="no">Calc</span> <span class="o">&gt;&gt;</span> <span class="s1">&#39;2 * Math::PI&#39;</span> <span class="c1"># =&gt; 6.283185307179586</span>
</span></pre></div>
<p>이 자체는 별 게 없습니다반 <code>Calc.&gt;&gt;</code>라는 메소드 이름이 irb 스러워서 좋지 않나요?</p>

<h3>48. true, false, nil</h3>

<p>Ruby에서 다루는 모든 데이터는 객체라 숫자도 클래스도
그리고 <code>true</code>, <code>false</code>, <code>nil</code>도 모두 객체라는 건 알고 계시겠죠. 따라서 당연하게도 이러한 객체들은 메소드를 가지고 있고 메소드를 추가할 수도 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">def</span> <span class="nc">true</span><span class="o">.</span><span class="nf">true?</span>  <span class="s1">&#39;Beleive me. you are true.&#39;</span>
</span><span id="line-2"><span class="k">end</span>
</span><span id="line-3">
</span><span id="line-4"><span class="k">def</span> <span class="nc">false</span><span class="o">.</span><span class="nf">true?</span>  <span class="s1">&#39;I said, you are false!&#39;</span>
</span><span id="line-5"><span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"><span class="n">my_point</span><span class="p">,</span> <span class="n">your_point</span> <span class="o">=</span> <span class="mi">87</span><span class="p">,</span> <span class="mi">35</span>
</span><span id="line-8"><span class="n">border</span> <span class="o">=</span> <span class="mi">60</span>
</span><span id="line-9"><span class="n">my_result</span> <span class="o">=</span> <span class="n">my_point</span> <span class="o">&gt;</span> <span class="n">border</span>
</span><span id="line-10"><span class="n">your_result</span> <span class="o">=</span> <span class="n">your_point</span> <span class="o">&gt;</span> <span class="n">border</span>
</span><span id="line-11">
</span><span id="line-12"><span class="n">my_result</span> <span class="c1"># =&gt; true</span>
</span><span id="line-13"><span class="n">my_result</span><span class="o">.</span><span class="n">true?</span><span class="c1"># =&gt; &quot;Beleive me. you are true.&quot;</span>
</span><span id="line-14"><span class="n">your_result</span> <span class="c1"># =&gt; false</span>
</span><span id="line-15"><span class="n">your_result</span><span class="o">.</span><span class="n">true?</span><span class="c1"># =&gt; &quot;I said, you are false!&quot;</span>
</span></pre></div>
<p><code>nil</code>에도 메소드를 정의해보죠.<code>===</code> 메소드를 정의해서 case에서 사용해보죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">def</span> <span class="nc">nil</span><span class="o">.</span><span class="nf">===</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="line-2">  <span class="n">other</span><span class="o">.</span><span class="n">nil?</span><span class="o">||</span> <span class="n">other</span><span class="o">.</span><span class="n">empty?</span><span class="k">end</span>
</span><span id="line-3">
</span><span id="line-4"><span class="k">def</span> <span class="nf">proceed</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="line-5">  <span class="nb">Array</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sr">//</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
</span><span id="line-6"><span class="k">end</span>
</span><span id="line-7">
</span><span id="line-8"><span class="n">full</span> <span class="o">=</span> <span class="s2">&quot;I&#39;m full.&quot;</span>
</span><span id="line-9"><span class="n">empty</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="line-10"><span class="n">_nil_</span> <span class="o">=</span> <span class="kp">nil</span>
</span><span id="line-11">
</span><span id="line-12"><span class="n">objects</span> <span class="o">=</span> <span class="o">[</span><span class="n">full</span><span class="p">,</span> <span class="n">empty</span><span class="p">,</span> <span class="n">_nil_</span><span class="p">,</span> <span class="sx">%w(I am full)</span><span class="p">,</span> <span class="o">[]</span><span class="p">,</span> <span class="p">{</span><span class="ss">:hello</span> <span class="o">=&gt;</span> <span class="s1">&#39;world&#39;</span><span class="p">},</span> <span class="p">{}</span><span class="o">]</span>
</span><span id="line-13">
</span><span id="line-14"><span class="k">for</span> <span class="n">obj</span> <span class="k">in</span> <span class="n">objects</span>
</span><span id="line-15">  <span class="k">case</span> <span class="n">obj</span>
</span><span id="line-16">  <span class="k">when</span> <span class="kp">nil</span>
</span><span id="line-17">    <span class="nb">puts</span> <span class="s2">&quot;Stop it!`</span><span class="si">#{</span><span class="n">obj</span><span class="o">.</span><span class="n">inspect</span><span class="si">}</span><span class="s2">` is empty or nil.&quot;</span>
</span><span id="line-18">  <span class="k">else</span>
</span><span id="line-19">    <span class="nb">puts</span> <span class="n">proceed</span> <span class="n">obj</span>
</span><span id="line-20">  <span class="k">end</span>
</span><span id="line-21"><span class="k">end</span>
</span><span id="line-22"><span class="c1"># &gt;&gt; I*&#39;*m* *f*u*l*l*.</span>
</span><span id="line-23"><span class="c1"># &gt;&gt; Stop it!`&quot;&quot;` is empty or nil.</span>
</span><span id="line-24"><span class="c1"># &gt;&gt; Stop it!`nil` is empty or nil.</span>
</span><span id="line-25"><span class="c1"># &gt;&gt; I*a*m*f*u*l*l</span>
</span><span id="line-26"><span class="c1"># &gt;&gt; Stop it!`[]` is empty or nil.</span>
</span><span id="line-27"><span class="c1"># &gt;&gt; h*e*l*l*o*w*o*r*l*d</span>
</span><span id="line-28"><span class="c1"># &gt;&gt; Stop it!`{}` is empty or nil.</span>
</span></pre></div>
<p>너무 심취했나요.</p>

<h3>49. 강제 타입 변환 coerce</h3>

<p>숫자 리스트에 n배를 곱하면 각각의 요소가 n배가 되는 객체가 필요하다고
해보죠. Array를 상속한 NumList로 이를 구현해보겠습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">NumList</span> <span class="o">&lt;</span> <span class="nb">Array</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">*</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span id="line-3">    <span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span> <span class="o">*</span> <span class="n">n</span> <span class="p">}</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5"><span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"><span class="n">numlist</span> <span class="o">=</span> <span class="no">NumList</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
</span><span id="line-8">
</span><span id="line-9"><span class="n">numlist</span> <span class="o">*</span> <span class="mi">3</span> <span class="c1"># =&gt; [3, 6, 9]</span>
</span></pre></div>
<p>욕심을 내서 곱하는 수를 앞에 놓아도 작동하도록 만들어보겠습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="mi">3</span> <span class="o">*</span> <span class="n">numlist</span> <span class="c1"># =&gt; </span>
</span><span id="line-2"><span class="c1"># ~&gt; -:15:in `*&#39;: NumList can&#39;t be coerced into Fixnum (TypeError)</span>
</span><span id="line-3"><span class="c1"># ~&gt;    from -:15:in `&lt;main&gt;&#39;</span>
</span></pre></div>
<p>당연히 <code>Fixnum#*</code> 메소드는 인수로 NumList 객체를 받을 수 없으므로
에러가 납니다. 설마 Fixnum#* 수정하시진 않겠죠. 어떻게 해야할까요.</p>

<p>이를 때는 <code>coerce</code>(강제 타입 변환)을 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">NumList</span> <span class="o">&lt;</span> <span class="nb">Array</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">*</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span id="line-3">    <span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span> <span class="o">*</span> <span class="n">n</span> <span class="p">}</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5">
</span><span id="line-6">  <span class="k">def</span> <span class="nf">coerce</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</span><span id="line-7">    <span class="o">[</span><span class="nb">self</span><span class="p">,</span> <span class="n">n</span><span class="o">]</span>
</span><span id="line-8">  <span class="k">end</span>
</span><span id="line-9"><span class="k">end</span>
</span><span id="line-10">
</span><span id="line-11"><span class="n">numlist</span> <span class="o">=</span> <span class="no">NumList</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
</span><span id="line-12">
</span><span id="line-13"><span class="n">numlist</span> <span class="o">*</span> <span class="mi">3</span> <span class="c1"># =&gt; [3, 6, 9]</span>
</span><span id="line-14"><span class="mi">3</span> <span class="o">*</span> <span class="n">numlist</span> <span class="c1"># =&gt; [3, 6, 9]</span>
</span></pre></div>
<p>Fixnum#* 메소드는 인수가 형변환이 불가능할 경우 객체의 coerce 메소드를 호출하는데 이를 이용하는 방법입니다.</p>

<h3>50. DATA.rewind</h3>

<p>DATA는 __END__ 이후의 부분을 File 객체로 불러들인 객체입니다.
따라서 rewind 메소드를 사용할 수 있는다. 이는 __END__ 이후의 첫
행으로 돌아가는 게 아니라 전체 파일의 첫 행으로 돌아갑니다. 따라서 이를 사용하면, 아차차.. Quine를 만들 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="c1">#!/usr/bin/env ruby</span>
</span><span id="line-2"><span class="nb">require</span> <span class="s2">&quot;g&quot;</span>
</span><span id="line-3"><span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
</span><span id="line-4">  <span class="n">op</span> <span class="o">=</span> <span class="sx">%w(\+ \* \/)</span>
</span><span id="line-5">  <span class="n">digit</span> <span class="o">=</span> <span class="sr">/-*\d+/</span>
</span><span id="line-6">  <span class="k">if</span> <span class="n">m</span> <span class="o">=</span> <span class="n">str</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/(</span><span class="si">#{</span><span class="n">op</span><span class="si">}</span><span class="sr">)\s+(</span><span class="si">#{</span><span class="n">digit</span><span class="si">}</span><span class="sr">)\s+(</span><span class="si">#{</span><span class="n">digit</span><span class="si">}</span><span class="sr">)/</span><span class="p">)</span>
</span><span id="line-7">    <span class="n">op</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">captures</span>
</span><span id="line-8">    <span class="n">inner</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">to_i</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">to_i</span><span class="p">)</span>
</span><span id="line-9">    <span class="n">str</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">pre_match</span> <span class="o">+</span> <span class="n">inner</span><span class="o">.</span><span class="n">to_s</span> <span class="o">+</span> <span class="n">m</span><span class="o">.</span><span class="n">post_match</span>
</span><span id="line-10">    <span class="n">evaluate</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
</span><span id="line-11">  <span class="k">else</span>
</span><span id="line-12">    <span class="n">str</span>
</span><span id="line-13">  <span class="k">end</span>
</span><span id="line-14"><span class="k">end</span>
</span><span id="line-15"><span class="n">g</span> <span class="n">evaluate</span><span class="p">(</span><span class="s2">&quot;+ * 3 4 5&quot;</span><span class="p">)</span>
</span><span id="line-16"><span class="no">DATA</span><span class="o">.</span><span class="n">rewind</span>
</span><span id="line-17"><span class="nb">puts</span> <span class="no">DATA</span><span class="o">.</span><span class="n">to_a</span>
</span><span id="line-18"><span class="cp">__END__</span>
</span></pre></div>
<p>이 코드를 실행하면 evaluate의 결과가 출력되는 것과 함께 코드 자체가 표준 출력으로 출력됩니다.</p>

<h3>51. Ruby 키워드</h3>

<p>Ruby 키워드는 언어의 예약어가 아니므로 명시적인 문맥에서 사용하기만 한다면
메소드 이름으로 사용하는 것도 가능합니다. 여기에서는 <code>case</code>, <code>if</code>, <code>for</code>을 Trivia 클래스에서 정의해보겠습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">Trivia</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">case</span><span class="p">(</span><span class="n">klass</span><span class="p">)</span>
</span><span id="line-3">    <span class="k">case</span> <span class="nb">self</span>
</span><span id="line-4">    <span class="k">when</span> <span class="n">klass</span><span class="p">;</span> <span class="s1">&#39;You are my sunshine.&#39;</span>
</span><span id="line-5">    <span class="k">else</span> <span class="s1">&#39;No, you are Alien for me&#39;</span>
</span><span id="line-6">    <span class="k">end</span>
</span><span id="line-7">  <span class="k">end</span>
</span><span id="line-8">
</span><span id="line-9">  <span class="k">def</span> <span class="nf">if</span><span class="p">(</span><span class="n">bool</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="line-10">    <span class="k">if</span> <span class="n">bool</span>
</span><span id="line-11">      <span class="k">yield</span> <span class="n">arg</span>
</span><span id="line-12">    <span class="k">else</span>
</span><span id="line-13">      <span class="n">arg</span><span class="o">.</span><span class="n">reverse</span>
</span><span id="line-14">    <span class="k">end</span>
</span><span id="line-15">  <span class="k">end</span>
</span><span id="line-16">
</span><span id="line-17">  <span class="k">def</span> <span class="nf">for</span><span class="p">(</span><span class="n">list</span><span class="p">)</span>
</span><span id="line-18">    <span class="n">list</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="k">yield</span> <span class="n">e</span> <span class="p">}</span>
</span><span id="line-19">  <span class="k">end</span>
</span><span id="line-20"><span class="k">end</span>
</span><span id="line-21">
</span><span id="line-22"><span class="n">t</span> <span class="o">=</span> <span class="no">Trivia</span><span class="o">.</span><span class="n">new</span>
</span><span id="line-23">
</span><span id="line-24"><span class="n">t</span><span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="no">Trivia</span><span class="p">)</span> <span class="c1"># =&gt; &quot;You are my sunshine.&quot;</span>
</span><span id="line-25"><span class="n">t</span><span class="o">.</span><span class="n">case</span><span class="p">(</span><span class="nb">Array</span><span class="p">)</span> <span class="c1"># =&gt; &quot;No, you are Alien for me&quot;</span>
</span><span id="line-26">
</span><span id="line-27"><span class="n">t</span><span class="o">.</span><span class="n">if</span><span class="p">(</span><span class="kp">true</span><span class="p">,</span> <span class="s1">&#39;my name is charlie&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span> <span class="n">str</span><span class="o">.</span><span class="n">upcase</span> <span class="p">}</span> <span class="c1"># =&gt; &quot;MY NAME IS CHARLIE&quot;</span>
</span><span id="line-28"><span class="n">t</span><span class="o">.</span><span class="n">if</span><span class="p">(</span><span class="kp">false</span><span class="p">,</span> <span class="s1">&#39;my name is charlie&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span> <span class="n">str</span><span class="o">.</span><span class="n">upcase</span> <span class="p">}</span> <span class="c1"># =&gt; &quot;eilrahc si eman ym&quot;</span>
</span><span id="line-29">
</span><span id="line-30"><span class="n">t</span><span class="o">.</span><span class="n">for</span><span class="p">(</span><span class="o">[*</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">10</span><span class="o">]</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="p">}</span> <span class="c1"># =&gt; [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]</span>
</span></pre></div>
<h3>52. YAML 태그 지정</h3>

<p>사용자 데이터를 다루는 프로그램을 만들 때 프로그램과 데이터를 분리하기 위해 <code>yaml 라이브러리</code>를 사용하면 편리합니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="nb">require</span> <span class="s2">&quot;yaml&quot;</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">langs_array</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="no">DATA</span><span class="p">)</span>
</span><span id="line-4"><span class="nb">puts</span> <span class="n">langs_array</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">lang</span><span class="o">|</span> <span class="s2">&quot;My favorite language is &quot;</span> <span class="o">+</span> <span class="n">lang</span> <span class="p">}</span>
</span><span id="line-5">
</span><span id="line-6"><span class="c1"># &gt;&gt; My favorite language is Ruby</span>
</span><span id="line-7"><span class="c1"># &gt;&gt; My favorite language is Lisp</span>
</span><span id="line-8"><span class="c1"># &gt;&gt; My favorite language is C++</span>
</span><span id="line-9">
</span><span id="line-10"><span class="cp">__END__</span>
</span><span id="line-11"><span class="cp">---</span>
</span><span id="line-12"><span class="cp">- Ruby</span>
</span><span id="line-13"><span class="cp">- Lisp</span>
</span><span id="line-14"><span class="cp">- C++</span>
</span></pre></div>
<p>여기서 <code>!ruby/</code>으로 시작하는 태그를 사용하면 문자열에 해당하는
클래스를 지정할 수 있는데 <code>!ruby/object:&lt;클래스 이름&gt;</code> 태그를 사용하면
임의의 클래스를 지정할 수도 있습니다. Language 클래스 객체로 YAML 데이터를 읽어와보겠습니다.</p>
<div class="highlight"><pre><span id="line-1"> <span class="nb">require</span> <span class="s2">&quot;yaml&quot;</span>
</span><span id="line-2"> <span class="k">class</span> <span class="nc">Language</span>
</span><span id="line-3">   <span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:born</span><span class="p">,</span> <span class="ss">:designer</span>
</span><span id="line-4">   <span class="k">def</span> <span class="nf">profile</span>
</span><span id="line-5">     <span class="o">[</span><span class="nb">name</span><span class="p">,</span> <span class="n">born</span><span class="p">,</span> <span class="n">designer</span><span class="o">]</span> <span class="o">*</span> <span class="s1">&#39;-&#39;</span>
</span><span id="line-6">   <span class="k">end</span>
</span><span id="line-7"> <span class="k">end</span>
</span><span id="line-8">
</span><span id="line-9"> <span class="n">members</span> <span class="o">=</span> <span class="no">YAML</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="no">DATA</span><span class="p">)</span>
</span><span id="line-10">
</span><span id="line-11"> <span class="nb">puts</span> <span class="n">members</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">member</span><span class="o">|</span> <span class="n">member</span><span class="o">.</span><span class="n">profile</span> <span class="p">}</span>
</span><span id="line-12">
</span><span id="line-13"> <span class="c1"># &gt;&gt; Ruby-1993-Yukihiro Matsumoto</span>
</span><span id="line-14"> <span class="c1"># &gt;&gt; Lisp-1958-Joh McCarthy</span>
</span><span id="line-15"> <span class="c1"># &gt;&gt; C++-1983-Bjarne Stroustrup</span>
</span><span id="line-16">
</span><span id="line-17"> <span class="cp">__END__</span>
</span><span id="line-18"><span class="cp"> --- </span>
</span><span id="line-19"><span class="cp"> - !ruby/object:Language</span>
</span><span id="line-20"><span class="cp">   name: Ruby</span>
</span><span id="line-21"><span class="cp">   born: 1993</span>
</span><span id="line-22"><span class="cp">   designer: Yukihiro Matsumoto</span>
</span><span id="line-23"><span class="cp"> - !ruby/object:Language</span>
</span><span id="line-24"><span class="cp">   name: Lisp</span>
</span><span id="line-25"><span class="cp">   born: 1958</span>
</span><span id="line-26"><span class="cp">   designer: Joh McCarthy</span>
</span><span id="line-27"><span class="cp"> - !ruby/object:Language</span>
</span><span id="line-28"><span class="cp">   name: C++</span>
</span><span id="line-29"><span class="cp">   born: 1983</span>
</span><span id="line-30"><span class="cp">   designer: Bjarne Stroustrup</span>
</span></pre></div>
<h3>53. 단항연산자 ~ (tilde)</h3>

<p>단항연산자 <code>~</code>는 사실 메소드인데 이 메소드가 어디서 정의되어있는 지 
아시나요? 맞습니다. <code>Fixnum</code>과 <code>Bignum</code>에서 NOT 연산을 하기 위해 만들어진 연산자입니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="o">~</span><span class="mi">1</span> <span class="c1"># =&gt; -2</span>
</span><span id="line-2"><span class="o">~</span><span class="mi">2</span> <span class="c1"># =&gt; -3</span>
</span><span id="line-3"><span class="o">~</span><span class="mi">3</span> <span class="c1"># =&gt; -4</span>
</span><span id="line-4"><span class="o">~</span><span class="mi">7</span> <span class="c1"># =&gt; -8</span>
</span><span id="line-5">
</span><span id="line-6"><span class="mi">1</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;1&quot;</span>
</span><span id="line-7"><span class="mi">2</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;10&quot;</span>
</span><span id="line-8"><span class="mi">3</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;11&quot;</span>
</span><span id="line-9"><span class="mi">7</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;111&quot;</span>
</span><span id="line-10">
</span><span id="line-11"><span class="p">(</span><span class="o">~</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;-10&quot;</span>
</span><span id="line-12"><span class="p">(</span><span class="o">~</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;-11&quot;</span>
</span><span id="line-13"><span class="p">(</span><span class="o">~</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;-100&quot;</span>
</span><span id="line-14"><span class="p">(</span><span class="o">~</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># =&gt; &quot;-1000&quot;</span>
</span></pre></div>
<p><code>Regexp</code>에도 정의되어있습니다. 이 메소드는 gets에서 입력을 받아 <code>$_</code>와 패턴 매치를 하기위해 사용됩니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="vg">$_</span> <span class="o">=</span> <span class="s1">&#39;Ruby is a dynamic, open source programming language with a focus on simplicity and productivity.&#39;</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">pos</span> <span class="o">=</span> <span class="o">~</span> <span class="sr">/\w{8,}/</span>
</span><span id="line-4"><span class="nb">puts</span> <span class="s2">&quot;8+long-word `</span><span class="si">#{</span><span class="vg">$&amp;</span><span class="si">}</span><span class="s2">` appeared at </span><span class="si">#{</span><span class="n">pos</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="line-5">
</span><span id="line-6"><span class="c1"># &gt;&gt; 8+long-word `programming` appeared at 31</span>
</span></pre></div>
<p>단항연산자의 특이한 점은 리시버가 메소드 뒤에 오는 점입니다. 이런
특징을 활용해 편리한 메소드들을 잔뜩 정의해서 써야만 하겠죠. 연산 우선 순위도 높아 메소드 체인에서도 문제 없이 사용할 수 있습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">String</span>
</span><span id="line-2">  <span class="k">def</span> <span class="nf">~</span>
</span><span id="line-3">    <span class="n">reverse</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5"><span class="k">end</span>
</span><span id="line-6">
</span><span id="line-7"><span class="k">class</span> <span class="nc">Symbol</span>
</span><span id="line-8">  <span class="k">def</span> <span class="nf">~</span>
</span><span id="line-9">    <span class="n">swapcase</span>
</span><span id="line-10">  <span class="k">end</span>
</span><span id="line-11"><span class="k">end</span>
</span><span id="line-12">
</span><span id="line-13"><span class="k">class</span> <span class="nc">Array</span>
</span><span id="line-14">  <span class="k">def</span> <span class="nf">~</span>
</span><span id="line-15">    <span class="n">reverse</span>
</span><span id="line-16">  <span class="k">end</span>
</span><span id="line-17"><span class="k">end</span>
</span><span id="line-18">
</span><span id="line-19"><span class="k">class</span> <span class="nc">Hash</span>
</span><span id="line-20">  <span class="k">def</span> <span class="nf">~</span>
</span><span id="line-21">    <span class="n">invert</span>
</span><span id="line-22">  <span class="k">end</span>
</span><span id="line-23"><span class="k">end</span>
</span><span id="line-24">
</span><span id="line-25"><span class="o">~</span><span class="s1">&#39;よるなくたにし なんてしつけいい&#39;</span> <span class="c1"># =&gt; &quot;いいけつしてんな しにたくなるよ&quot;</span>
</span><span id="line-26">
</span><span id="line-27"><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;godtoh&#39;</span>
</span><span id="line-28"><span class="o">~</span><span class="n">s</span><span class="o">.</span><span class="n">swapcase</span> <span class="c1"># =&gt; &quot;HOTDOG&quot;</span>
</span><span id="line-29">
</span><span id="line-30"><span class="o">~</span><span class="ss">:Hello</span> <span class="c1"># =&gt; :hELLO</span>
</span><span id="line-31">
</span><span id="line-32"><span class="o">~[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">]</span> <span class="c1"># =&gt; [4, 3, 2, 1]</span>
</span><span id="line-33">
</span><span id="line-34"><span class="o">~</span><span class="p">{</span><span class="ss">ruby</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">lisp</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span> <span class="c1"># =&gt; {1=&gt;:ruby, 2=&gt;:lisp}</span>
</span></pre></div>
<p>뭐 확실히 <code>~</code>만으론 메소드의 의도를 파악하기 힘듭니다만...</p>

<h3>54. 멀티 바이트 메소드</h3>

<p>1.9부터 메소드 이름에 멀티 바이트 문자를 사용할 수 있는데 실제 활용
사례는 별로 없습니다. 이래서는 Ruby가 불쌍해지니 이러한 방법을 포교해보죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">class</span> <span class="nc">String</span>
</span><span id="line-2">  <span class="k">def</span> <span class="err">©</span><span class="p">(</span><span class="nb">name</span><span class="o">=</span><span class="s1">&#39;anonymous&#39;</span><span class="p">)</span>
</span><span id="line-3">    <span class="nb">self</span> <span class="o">+</span> <span class="s2">&quot; - Copyright © </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2"> All rights reserved. -&quot;</span>
</span><span id="line-4">  <span class="k">end</span>
</span><span id="line-5">
</span><span id="line-6">  <span class="k">def</span> <span class="err"></span>
</span><span id="line-7">    <span class="nb">self</span> <span class="o">+</span> <span class="s1">&#39; - Designed by Apple in California -&#39;</span>
</span><span id="line-8">  <span class="k">end</span>
</span><span id="line-9"><span class="k">end</span>
</span><span id="line-10">
</span><span id="line-11"><span class="s1">&#39;this is my work&#39;</span><span class="o">.</span><span class="err">©</span><span class="p">(</span><span class="ss">:Charlie</span><span class="p">)</span> <span class="c1"># =&gt; &quot;this is my work - Copyright © Charlie 2012 All rights reserved. -&quot;</span>
</span><span id="line-12">
</span><span id="line-13"><span class="n">poetry</span> <span class="o">=</span> <span class="o">&lt;&lt;</span><span class="no">EOS</span>
</span><span id="line-14"><span class="err">Ruby is not a Gem</span>
</span><span id="line-15"><span class="err">Gem is not a Jam</span>
</span><span id="line-16"><span class="err">Jam is not a Jelly</span>
</span><span id="line-17"><span class="err">Jam is about Traffic</span>
</span><span id="line-18"><span class="err">Gem is about Library</span>
</span><span id="line-19"><span class="err">Ruby is about Language!EOS</span>
</span><span id="line-20">
</span><span id="line-21"><span class="err">puts poetry.©</span>
</span><span id="line-22">
</span><span id="line-23"><span class="err"># &gt;&gt; Ruby is not a Gem</span>
</span><span id="line-24"><span class="err"># &gt;&gt; Gem is not a Jam</span>
</span><span id="line-25"><span class="err"># &gt;&gt; Jam is not a Jelly</span>
</span><span id="line-26"><span class="err"># &gt;&gt; Jam is about Traffic</span>
</span><span id="line-27"><span class="err"># &gt;&gt; Gem is about Library</span>
</span><span id="line-28"><span class="err"># &gt;&gt; Ruby is about Language!# &gt;&gt;  - Copyright © anonymous 2012 All rights reserved. -</span>
</span><span id="line-29">
</span><span id="line-30"><span class="err">&#39;hello, apple&#39;. # =&gt; &quot;hello, apple - Designed by Apple in California -&quot;</span>
</span><span id="line-31"><span class="no">Ruby</span> <span class="n">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="no">Gem</span>
</span><span id="line-32"><span class="no">Gem</span> <span class="n">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="no">Jam</span>
</span><span id="line-33"><span class="no">Jam</span> <span class="n">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="no">Jelly</span>
</span><span id="line-34"><span class="no">Jam</span> <span class="n">is</span> <span class="n">about</span> <span class="no">Traffic</span>
</span><span id="line-35"><span class="no">Gem</span> <span class="n">is</span> <span class="n">about</span> <span class="no">Library</span>
</span><span id="line-36"><span class="no">Ruby</span> <span class="n">is</span> <span class="n">about</span> <span class="no">Language</span><span class="o">!</span><span class="no">EOS</span>
</span><span id="line-37">
</span><span id="line-38"><span class="nb">puts</span> <span class="n">poetry</span><span class="o">.</span><span class="err">©</span>
</span><span id="line-39">
</span><span id="line-40"><span class="c1"># &gt;&gt; Ruby is not a Gem</span>
</span><span id="line-41"><span class="c1"># &gt;&gt; Gem is not a Jam</span>
</span><span id="line-42"><span class="c1"># &gt;&gt; Jam is not a Jelly</span>
</span><span id="line-43"><span class="c1"># &gt;&gt; Jam is about Traffic</span>
</span><span id="line-44"><span class="c1"># &gt;&gt; Gem is about Library</span>
</span><span id="line-45"><span class="c1"># &gt;&gt; Ruby is about Language!# &gt;&gt;  - Copyright © anonymous 2012 All rights reserved. -</span>
</span><span id="line-46">
</span><span id="line-47"><span class="s1">&#39;hello, apple&#39;</span><span class="o">.</span><span class="err"></span> <span class="c1"># =&gt; &quot;hello, apple - Designed by Apple in California -&quot;</span>
</span></pre></div>
<p><code></code>는 Mac keyboard에서 <code>~$k</code>(Option+Shift+k)를 누르면 나옵니다. (역주:
이 기호는 애플 상표 기호로, Mac에서만 제대로 나옵니다.)</p>

<p><code>Numeric</code>에는 화폐 메소드를 추가해보죠. 여기서는 <code>def method</code>를 사용해 일일히 클래스를 다시 여는 번거로움을 줄여보겠습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">def</span> <span class="nf">def_method</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">klass</span><span class="o">=</span><span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">body</span><span class="p">)</span>
</span><span id="line-2">  <span class="n">blk</span> <span class="o">=</span> <span class="nb">block_given?</span><span class="p">?</span><span class="n">body</span> <span class="p">:</span> <span class="o">-&gt;</span><span class="p">{</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">: not implemented yet.&quot;</span> <span class="p">}</span>
</span><span id="line-3">  <span class="n">klass</span><span class="o">.</span><span class="n">class_eval</span> <span class="p">{</span> <span class="n">define_method</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">blk</span><span class="p">)</span> <span class="p">}</span>
</span><span id="line-4"><span class="k">end</span>
</span><span id="line-5">
</span><span id="line-6"><span class="n">currencies</span> <span class="o">=</span> <span class="sx">%w(¥ € £ $)</span><span class="o">.</span><span class="n">zip</span> <span class="o">[</span><span class="ss">:JPY</span><span class="p">,</span> <span class="ss">:EUR</span><span class="p">,</span> <span class="ss">:GBP</span><span class="p">,</span> <span class="ss">:USD</span><span class="o">]</span>
</span><span id="line-7"><span class="n">currencies</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">cur</span><span class="p">,</span> <span class="n">sym</span><span class="o">|</span>
</span><span id="line-8">  <span class="n">def_method</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="no">Numeric</span><span class="p">)</span> <span class="k">do</span>
</span><span id="line-9">    <span class="n">int</span><span class="p">,</span> <span class="n">dec</span> <span class="o">=</span> <span class="no">Exchange</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="n">sym</span><span class="p">)</span><span class="o">.</span><span class="n">to_s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</span><span id="line-10">    <span class="n">dec</span> <span class="o">=</span> <span class="n">dec</span> <span class="sc">?&quot;</span><span class="o">.</span><span class="c1">#{dec[/.{1,2}/]}&quot; : &#39;&#39;</span>
</span><span id="line-11">    <span class="n">cur</span> <span class="o">+</span> <span class="n">int</span><span class="o">.</span><span class="n">reverse</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="sr">/.{1,3}/</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reverse</span> <span class="o">+</span> <span class="n">dec</span>
</span><span id="line-12">  <span class="k">end</span>
</span><span id="line-13"><span class="k">end</span>
</span><span id="line-14">
</span><span id="line-15"><span class="k">def</span> <span class="nf">Exchange</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">_for_</span><span class="p">)</span>
</span><span id="line-16">  <span class="n">num</span> <span class="o">*</span> <span class="p">{</span><span class="ss">USD</span><span class="p">:</span><span class="mi">1</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span> <span class="ss">JPY</span><span class="p">:</span><span class="mi">81</span><span class="o">.</span><span class="mi">3</span><span class="p">,</span> <span class="ss">EUR</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">76</span><span class="p">,</span> <span class="ss">GBP</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">62</span><span class="p">}</span><span class="o">[</span><span class="n">_for_</span><span class="o">]</span>
</span><span id="line-17"><span class="k">end</span>
</span><span id="line-18">
</span><span id="line-19"><span class="mi">123</span><span class="o">.</span><span class="mi">45</span><span class="o">.</span><span class="err">¥</span> <span class="c1"># =&gt; &quot;¥10,036.48&quot;</span>
</span><span id="line-20"><span class="mi">1000000</span><span class="o">.</span><span class="err">¥</span> <span class="c1"># =&gt; &quot;¥81,300,000.0&quot;</span>
</span><span id="line-21"><span class="mi">123</span><span class="o">.</span><span class="err">€</span> <span class="c1"># =&gt; &quot;€93.48&quot;</span>
</span><span id="line-22"><span class="mi">1000000</span><span class="o">.</span><span class="err">€</span> <span class="c1"># =&gt; &quot;€760,000.0&quot;</span>
</span><span id="line-23"><span class="mi">123</span><span class="o">.</span><span class="mi">45</span><span class="o">.</span><span class="err">£</span> <span class="c1"># =&gt; &quot;£76.53&quot;</span>
</span><span id="line-24"><span class="mi">1000000</span><span class="o">.</span><span class="err">£</span> <span class="c1"># =&gt; &quot;£620,000.0&quot;</span>
</span></pre></div>
<p>뭐 입력이 좀 힘들긴 합니다만..</p>

<h3>55. 비밀 메소드</h3>

<p>위의 예처럼 Ruby에서는 키워드나 기호를 메소드 이름에 사용할 수
있습니다만 사용하지 못 하는 것도 있습니다. 예를 들어, <code>.</code>, <code>,</code>, <code>@</code>, <code>=</code>, <code>(</code>, <code>#</code>, <code>$</code> 는 메소드 이름에서 사용할 수 없습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">def</span> <span class="o">.</span>
</span><span id="line-2"><span class="k">end</span>
</span><span id="line-3"><span class="c1"># ~&gt; -:1: syntax error, unexpected &#39;.&#39;</span>
</span><span id="line-4">
</span><span id="line-5"><span class="k">def</span> <span class="p">,</span>
</span><span id="line-6"><span class="k">end</span>
</span><span id="line-7"><span class="c1"># ~&gt; -:1: syntax error, unexpected &#39;,&#39;</span>
</span><span id="line-8">
</span><span id="line-9"><span class="k">def</span> <span class="err">@</span>
</span><span id="line-10"><span class="k">end</span>
</span><span id="line-11"><span class="c1"># ~&gt; -:1: syntax error, unexpected $undefined</span>
</span><span id="line-12">
</span><span id="line-13"><span class="k">def</span> <span class="o">=</span>
</span><span id="line-14"><span class="k">end</span>
</span><span id="line-15"><span class="c1"># ~&gt; -:1: syntax error, unexpected &#39;=&#39;</span>
</span><span id="line-16">
</span><span id="line-17"><span class="k">def</span> <span class="p">(</span>
</span><span id="line-18"><span class="k">end</span>
</span><span id="line-19"><span class="c1"># ~&gt; -:2: syntax error, unexpected keyword_end</span>
</span><span id="line-20">
</span><span id="line-21"><span class="k">def</span> <span class="c1">#</span>
</span><span id="line-22"><span class="k">end</span>
</span><span id="line-23"><span class="c1"># ~&gt; -:4: syntax error, unexpected $end</span>
</span><span id="line-24">
</span><span id="line-25"><span class="k">def</span> <span class="err">$</span>
</span><span id="line-26"><span class="k">end</span>
</span><span id="line-27"><span class="c1"># ~&gt; -:1: syntax error, unexpected $undefined</span>
</span></pre></div>
<p>보통은 여기서 납득하고 넘어가겠죠. 하지만 <code>define_method</code>를 사용하면 이러한
기호들도 메소드 이름으로 사용할 수 있습니다. 먼저 def_method를 사용해 이런 메소드를 정의해보죠.</p>
<div class="highlight"><pre><span id="line-1"><span class="k">def</span> <span class="nf">def_method</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">klass</span><span class="o">=</span><span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">body</span><span class="p">)</span>
</span><span id="line-2">  <span class="n">blk</span> <span class="o">=</span> <span class="nb">block_given?</span><span class="p">?</span><span class="n">body</span> <span class="p">:</span> <span class="o">-&gt;</span><span class="p">{</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">: not implemented yet.&quot;</span> <span class="p">}</span>
</span><span id="line-3">  <span class="n">klass</span><span class="o">.</span><span class="n">class_eval</span> <span class="p">{</span> <span class="n">define_method</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">blk</span><span class="p">)</span> <span class="p">}</span>
</span><span id="line-4"><span class="k">end</span>
</span><span id="line-5">
</span><span id="line-6"><span class="k">class</span> <span class="nc">Trivia</span>
</span><span id="line-7">
</span><span id="line-8"><span class="k">end</span>
</span><span id="line-9">
</span><span id="line-10"><span class="nb">methods</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;@&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;$&quot;</span><span class="o">]</span>
</span><span id="line-11"><span class="nb">methods</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">meth</span><span class="o">|</span> <span class="n">def_method</span> <span class="n">meth</span><span class="p">,</span> <span class="no">Trivia</span> <span class="p">}</span>
</span><span id="line-12">
</span><span id="line-13"><span class="no">Trivia</span><span class="o">.</span><span class="n">public_instance_methods</span><span class="p">(</span><span class="kp">false</span><span class="p">)</span> <span class="c1"># =&gt; [:&quot;.&quot;, :&quot;,&quot;, :&quot;@&quot;, :&quot;=&quot;, :&quot;(&quot;, :&quot;#&quot;, :&quot;$&quot;]</span>
</span></pre></div>
<p>되죠?</p>

<p>하지만 이 메소드들에는 치명적인 단점이 하나 있습니다.</p>

<p>그건...</p>

<p>호출이 불가능하는 겁니다! ^^;</p>
<div class="highlight"><pre><span id="line-1"><span class="n">t</span> <span class="o">=</span> <span class="no">Trivia</span><span class="o">.</span><span class="n">new</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">t</span><span class="o">.</span><span class="n">.</span> <span class="c1"># =&gt; </span>
</span><span id="line-4"><span class="n">t</span><span class="o">.</span><span class="n">,</span> <span class="c1"># =&gt; </span>
</span><span id="line-5"><span class="n">t</span><span class="o">.</span><span class="err">@</span> <span class="c1"># =&gt; </span>
</span><span id="line-6"><span class="n">t</span><span class="o">.</span><span class="n">=</span> <span class="c1"># =&gt; </span>
</span><span id="line-7"><span class="n">t</span><span class="o">.</span><span class="p">(</span> <span class="c1"># =&gt; </span>
</span><span id="line-8"><span class="n">t</span><span class="o">.</span><span class="c1"># # =&gt; </span>
</span><span id="line-9"><span class="n">t</span><span class="o">.</span><span class="err">$</span> <span class="c1"># =&gt; </span>
</span><span id="line-10">
</span><span id="line-11"><span class="c1"># ~&gt; -:42: syntax error, unexpected &#39;)&#39;</span>
</span><span id="line-12"><span class="c1"># ~&gt; ...1335430361_15646_549583 = (t..);$stderr.puts(&quot;!XMP1335430361...</span>
</span><span id="line-13"><span class="c1"># ~&gt; ...                               ^</span>
</span><span id="line-14"><span class="c1"># ~&gt; -:43: syntax error, unexpected &#39;,&#39;</span>
</span><span id="line-15"><span class="c1"># ~&gt; ..._1335430361_15646_549583 = (t.,);$stderr.puts(&quot;!XMP133543036...</span>
</span><span id="line-16"><span class="c1"># ~&gt; ...                               ^</span>
</span><span id="line-17"><span class="c1"># ~&gt; -:44: syntax error, unexpected $undefined</span>
</span><span id="line-18"><span class="c1"># ~&gt; ..._1335430361_15646_549583 = (t.@);$stderr.puts(&quot;!XMP133543036...</span>
</span><span id="line-19"><span class="c1"># ~&gt; ...                               ^</span>
</span><span id="line-20"><span class="c1"># ~&gt; -:45: syntax error, unexpected &#39;=&#39;</span>
</span><span id="line-21"><span class="c1"># ~&gt; ..._1335430361_15646_549583 = (t.=);$stderr.puts(&quot;!XMP133543036...</span>
</span><span id="line-22"><span class="c1"># ~&gt; ...                               ^</span>
</span><span id="line-23"><span class="c1"># ~&gt; -:48: syntax error, unexpected $undefined</span>
</span><span id="line-24"><span class="c1"># ~&gt; ..._1335430361_15646_549583 = (t.$);$stderr.puts(&quot;!XMP133543036...</span>
</span><span id="line-25"><span class="c1"># ~&gt; ...                               ^</span>
</span><span id="line-26"><span class="c1"># ~&gt; -:65: syntax error, unexpected $end, expecting &#39;)&#39;</span>
</span></pre></div>
<p>단 <code>Object#send</code>나 <code>Method#call</code> 메소드를 사용해 호출하는 건 가능한데 귀찮습니다.</p>
<div class="highlight"><pre><span id="line-1"><span class="n">t</span> <span class="o">=</span> <span class="no">Trivia</span><span class="o">.</span><span class="n">new</span>
</span><span id="line-2">
</span><span id="line-3"><span class="n">t</span><span class="o">.</span><span class="n">send</span> <span class="s1">&#39;.&#39;</span> <span class="c1"># =&gt; &quot;.: not implemented yet.&quot;</span>
</span><span id="line-4"><span class="n">t</span><span class="o">.</span><span class="n">method</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">call</span> <span class="c1"># =&gt; &quot;,: not implemented yet.&quot;</span>
</span><span id="line-5">
</span><span id="line-6"><span class="n">def_method</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="no">Trivia</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">num</span><span class="o">|</span>
</span><span id="line-7">  <span class="s2">&quot;</span><span class="si">#{</span><span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s1">&#39;@&#39;</span><span class="p">)</span>
</span><span id="line-8"><span class="k">end</span>
</span><span id="line-9">
</span><span id="line-10"><span class="n">def_method</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="no">Trivia</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span>
</span><span id="line-11">  <span class="s2">&quot;( </span><span class="si">#{</span><span class="n">str</span><span class="si">}</span><span class="s2"> )&quot;</span>
</span><span id="line-12"><span class="k">end</span>
</span><span id="line-13">
</span><span id="line-14"><span class="n">t</span><span class="o">.</span><span class="n">send</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="mi">12</span> <span class="c1"># =&gt; &quot;@@@Trivia@@@&quot;</span>
</span><span id="line-15"><span class="n">t</span><span class="o">.</span><span class="n">send</span> <span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;I love Ruby&#39;</span>  <span class="c1"># =&gt; &quot;( I love Ruby )&quot;</span>
</span></pre></div>
<p>즉 이러한 기호들을 사용한 메소드는 일반적인 방법으로는 정의하거나
호출하는 게 불가능하지만, 일반적이지 않은 특별한 방법을 사용하면
정의할 수도 있고 호출할 수도 있는 특수한 메소드들이라고 할 수
있습니다. 저는 이러한 메소드들을 특수한 방법으로 숨겨진 메소드, 즉
<code>비밀(hidden)</code> 메소드라고 이름 붙였습니다. 어디에 사용할 지는... 저도 잘 모르겠습니다..</p>

<p>이상으로 Ruby 55가지 기법을 설명했습니다. 새로운 발견은 있으셨나요? </p>

<p>(추신：2013-03-31)@no6v 님 이름이 @no6v1 님으로 되어있었습니다. 수정했습니다. 죄송합니다.</p>

<hr>

<p><a href="/books/">
  <img src="http://melborne.github.io/assets/images/2013/03/ruby_trivia_cover.png" alt="trivia" style="width:200px" />
</a></p>

<p><a href="http://gum.co/owIqH" class="gumroad-button">E-Book 알아두면 도움이 되는 55가지 루비 기법 EPUB/MOBI판</a><script type="text/javascript" src="https://gumroad.com/js/gumroad-button.js"></script><script type="text/javascript" src="https://gumroad.com/js/gumroad.js"></script></p>

<p>이 링크는 Gumroad의 상품 구매 페이지입니다. 클릭하면 오버레이 윈도우가
뜨고 여기서 카드 정보를 입력하면 구입이 가능합니다. 구입을 하려면 카드
정보와 이메일 주소를 입력해야합니다. 구입이 정상적으로 완료되면 입력한 이메일로 다운로드 가능한 링크가 보내집니다.</p>

</div>
<div class='footer'>
<hr>
<div class='author'>
<h1>nacyot</h1>
Ruby 보급에 앞장서는 프로그래머(29)
</div>
<div class='share'>
<h1>Share this post</h1>
</div>
</div>
<hr>
<div id='disqus_thread'>
<script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'nacyot'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
</div>
<div class='navigation'>
<div class='prevnav'>
<div class='fa fa-chevron-left'></div>
이전 글
<a href='/articles/2013-10-30-angularjs-style-guide/' rel='prev'>AngularJs 스타일 가이드</a>
</div>
<div class='nextnav'>
<div class='fa fa-chevron-right'></div>
다음 글:
<a href='/articles/2013-12-29-hub-and-pull-request/' rel='next'>hub로 명령행에서 Github 풀리퀘스트 보내기</a>
</div>
<br style='clear:both'>
</div>
</div>
</div>
</div>
<div class='col-lg-2 col-md-1 col-sm-1 col-xs-1'></div>
</div>

<div class='row'>
<div class='col-lg-12'>
<hr>
<div class='site-footer'>
<p>
<a href="http://creativecommons.org/licenses/by-nc/2.1/jp/"><img src="http://i.creativecommons.org/l/by-nc/2.1/jp/88x31.png" title="cc-by-nc"></a>
</p>
</div>
</div>
</div>

<a href="https://github.com/nacyot/blog.nacyot.com-source"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-46785477-2', 'nacyot.com');
  ga('send', 'pageview');
</script>
</body>
</html>

