
<div class="text_cell_render border-box-sizing rendered_html">
<p>루비에서는 C나 php과 같은 스타일의 반복문을 일부 지원하지만 별로 사용하지 않습니다</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="n">do</span>
  <span class="n">puts</span> <span class="n">i</span>
  <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">end</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt"></div>
<div class="box-flex1 output_subarea output_stream output_stdout">
<pre>
0
1
2
3
4

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>대신에 루비에서는 컬렉션 객체에서 사용 가능한 Enumerable 모듈을 지원하고 있습니다. 실제로 루비 프로그래밍을 하다보면 기본적인 반복문은 이른바 반복자라고 불리는 <code>each</code>만으로도 크게 부족함 없이 프로그래밍할 수 있습니다. 이를 통해서 블록을 통해 반복문과 비슷한 것들을 할 수 있습니다. <code>each</code>는 다음과 같이 사용합니다</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">puts</span> <span class="n">i</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt"></div>
<div class="box-flex1 output_subarea output_stream output_stdout">
<pre>
0
1
2
3
4

</pre>
</div>
</div>

<div class="hbox output_area"><div class="prompt output_prompt">
    Out[2]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
0
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>이러한 반복문에서는 <code>for</code>문이나 <code>while</code>문 같은 반복 자체를 제어하기 위한 별도의 접근을 사용할 수 없다는 단점이 있습니다만, <code>each</code>를 사용한 반복문의 장점은 컬렉션에 대해서 각각의 요소를 처리하는 로직을 정의하는데 집중할 수 있으면 기존 반복문 조건에서 사용하는 임시 변수의 부작용을 최소화해서 의도치않은 작동을 사전이 미리 차단할 수 있다는 점입니다</p>
<p>단, 루비는 함수형 언어가 아니므로 블록 내에서 블록 밖의 변수를 조작하는 부작용에 대해서는 의도치 않은 결과를 초래할 수도 있습니다</p>
<pre class="sourceCode ruby"><code class="sourceCode ruby">arr = [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]
arr.map{|i| arr &lt;&lt; <span class="dv">5</span>; puts i}</code></pre>
<p>이러한 반복문을 사용하지 마세요. 무한히 5가 출력됩니다. Fiber를 사용해 이를 확인해보도록 하겠습니다</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[9]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="n">fiber</span> <span class="o">=</span> <span class="n">Fiber</span><span class="o">.</span><span class="n">new</span> <span class="n">do</span>
  <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
  <span class="n">arr</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">arr</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">Fiber</span><span class="o">.</span><span class="k">yield</span> <span class="n">i</span><span class="p">}</span>
<span class="n">end</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[9]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
#&lt;Fiber:0x007f94a2842fb8&gt;
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[10]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="c"># 여기까지는 정상적인 처리와 같습니다만...</span>
<span class="mf">4.</span><span class="n">times</span> <span class="n">do</span>
  <span class="n">puts</span> <span class="n">fiber</span><span class="o">.</span><span class="n">resume</span>
<span class="n">end</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt"></div>
<div class="box-flex1 output_subarea output_stream output_stdout">
<pre>
0
1
2
3

</pre>
</div>
</div>

<div class="hbox output_area"><div class="prompt output_prompt">
    Out[10]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
4
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[11]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="c"># 여기부터는 5가 출력됩니다.</span>
<span class="n">puts</span> <span class="n">fiber</span><span class="o">.</span><span class="n">resume</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt"></div>
<div class="box-flex1 output_subarea output_stream output_stdout">
<pre>
5

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[12]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="n">puts</span> <span class="n">fiber</span><span class="o">.</span><span class="n">resume</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt"></div>
<div class="box-flex1 output_subarea output_stream output_stdout">
<pre>
5

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>이와 같이 5가 계속 반복되는 것을 알 수 있습니다. 계속 <code>resume</code> 메시지를 보내면 계속 5가 출력됩니다. 이러한 부작용(side-effect)에 대해서는 명확히 알고 있을 필요가 있습니다</p>
<p>루비의 Enumerable은 이러한 미묘한 단점을 내포하고 있기는 합니다만, 그럼에도 불구하고 강력합니다. 이렇듯 명시적으로 외부 변수에 부작용을 일으키지만 않는다면, 반복 과정에서 블록을 통해 임시 변수나 내부 변수에 대해서는 부작용을 걱정할 필요가 없으며, 메소드 체인을 통해 유사한 컬렉션 처리를 자연스럽게 연속적으로 적용할 수 있습니다</p>
<p>중요한 건 루비의 Enumerable이 제공하는 반복자는 <code>each</code>가 전부가 아니라는 점입니다. 여기서부터는 Enumerable 모듈에 포함된 블록을 받는 컬렉션 처리 메소드들을 소개하도록 하겠습니다</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="map-collect">map, collect</h2>
<p><code>each</code> 다음으로 유명한 반복자는 <code>map</code>과 <code>collect</code>입니다. 이 두 메소드는 실제로는 같고 이름만 다릅니다. 먼저 <code>each</code>는 컬렉션의 각 요소를 순차적으로 블록에 넘겨 처리합니다</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[16]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="nb">str</span> <span class="o">=</span> <span class="s">&quot;Hello&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[16]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[17]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="nb">str</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="nb">chr</span><span class="o">|</span> <span class="n">puts</span> <span class="nb">chr</span><span class="o">.</span><span class="n">upcase</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt"></div>
<div class="box-flex1 output_subarea output_stream output_stdout">
<pre>
H
E
L
L
O

</pre>
</div>
</div>

<div class="hbox output_area"><div class="prompt output_prompt">
    Out[17]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>단 여기서 each의 역할은 각 요소를 블록 인자 <code>chr</code>로 받아서 한번씩 평가해주는 일이지 원래의 컬렉션을 변경한 값을 리턴하지는 않습니다. 즉, <code>each</code>의 평가 결과는 항상 리시버와 동일합니다</p>
<p>하지만 <code>map</code>은 리시버와 평가 결과가 달라집니다. <code>map</code>이 하는 역할은 각 요소들을 블록 인자 <code>chr</code>로 받아 블록을 평가한 결과로 원래의 요소를 변경합니다. 이렇게 만들어진 새로운 컬렉션을 리턴합니다(단, 원래의 컬렉션을 변경하지는 않습니다.)</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[20]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="nb">str</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="nb">chr</span><span class="o">|</span> <span class="nb">chr</span><span class="o">.</span><span class="n">upcase</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[20]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[&quot;H&quot;, &quot;E&quot;, &quot;L&quot;, &quot;L&quot;, &quot;O&quot;]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>이러한 차이는 <code>each</code>에서 puts을 사용하지 않아도 마찬가지입니다. <code>each</code>에서 블록의 평가값은 그냥 버려지는 값이고, <code>each</code>는 그저 리시버를 다시 리턴해줍니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[21]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="nb">str</span><span class="o">.</span><span class="n">each</span><span class="p">{</span><span class="o">|</span><span class="nb">chr</span><span class="o">|</span> <span class="nb">chr</span><span class="o">.</span><span class="n">upcase</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[21]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[&quot;H&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>위에서 얘기했듯이 <code>collect</code>는 <code>each</code>와 같습니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[22]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="nb">str</span><span class="o">.</span><span class="n">collect</span><span class="p">{</span><span class="o">|</span><span class="nb">chr</span><span class="o">|</span> <span class="nb">chr</span><span class="o">.</span><span class="n">upcase</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[22]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[&quot;H&quot;, &quot;E&quot;, &quot;L&quot;, &quot;L&quot;, &quot;O&quot;]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>이러한 차이로 인해서 <code>each</code>를 사용할 때 강제적으로 블록 외부의 변수(특히 리시버)를 변경하려는 시도를 할 때가 있는데, 위에서 설명했지만 이러한 부작용은 의도치 않은 결과를 초래할 수 있습니다. 컬렉션 자체를 특적한 로직으로 변경하고자 할 때는 <code>map</code>이나 <code>collect</code>를 사용해야합니다</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="메소드-체인method-chain">메소드 체인(Method Chain)</h2>
<p>여기서 잠깐 다른 메소드를 소개하기 전에 다른 얘기를 하고 넘어가겠습니다. <code>map</code> 메소드를 통해서 컬렉션을 조작하는 일은 매우 흥미로운 일입니다. <code>map</code>은 컬렉션의 요소들을 하나하나 변경합니다. 즉 리시버 컬렉션의 모든 요소들은 넘겨받은 블록의 로직에 의해서 하나하나 변경됩니다. 중요한 건 이렇게 변경되어 리턴되는 것은 리시버와 마찬가지로 컬렉션이라는 사실입니다. 따라서 배열에 map을 사용하면 다른 배열이 리턴됩니다. 아래 예에서는 배열을 절대값으로 변경해보겠습니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[24]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mf">1.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.8</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.99</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.1</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">abs</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[24]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[1.3, 2.8, 3.2, 4.99, 5.1]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Enumerable을 사용할 때는 항상 이러한 사실을 의식할 필요가 있습니다. 이렇듯 리턴값의 형식이 리시버와 같다는 것이 보장되는 메소드를 사용할 때는 리시버에 연속적으로 Enumerable 메소드를 호출할 수 있습니다. 예를 들어 위의 예에서 계속해서 반올림을 해보겠습니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[27]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mf">1.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.8</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.99</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.1</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">abs</span><span class="p">}</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">0</span><span class="p">)}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[27]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[1, 3, 3, 5, 5]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>예상한 결과가 나왔나요? 좀 더 자세히 살펴본다면,</p>
<pre class="sourceCode ruby"><code class="sourceCode ruby">[<span class="fl">1.3</span>, -<span class="fl">2.8</span>, <span class="fl">3.2</span>, -<span class="fl">4.99</span>, -<span class="fl">5.1</span>].map{|number| number.abs}</code></pre>
<p>의 평가 결과가 <code>[1.3, 2.8, 3.2, 4.99, 5.1]</code>가 되어 아래와 같이 <code>map</code> 메소드가 사용되었습니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[29]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">2.8</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mf">4.99</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">round</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[29]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[1, 3, 3, 5, 5]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>이러한 메소드 체인은 계속해서 이어질 수 있습니다</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[46]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mf">1.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.8</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">4.99</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.1</span><span class="p">]</span><span class="o">.</span>
  <span class="nb">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">abs</span><span class="p">}</span><span class="o">.</span>      <span class="c"># [1.3, 2.8, 3.2, 4.99, 5.1]</span>
  <span class="nb">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">round</span><span class="p">}</span><span class="o">.</span> <span class="c"># [1, 3, 3, 5, 5]</span>
  <span class="nb">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">}</span><span class="o">.</span>    <span class="c"># [0.5, 1.5, 1.5, 2.5, 2.5]</span>
  <span class="nb">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">to_s</span><span class="p">}</span>      <span class="c"># [&quot;0.5&quot;, &quot;1.5&quot;, &quot;1.5&quot;, &quot;2.5&quot;, &quot;2.5&quot;]</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[46]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[&quot;0.5&quot;, &quot;1.5&quot;, &quot;1.5&quot;, &quot;2.5&quot;, &quot;2.5&quot;]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>위 예제에 별다른 의미는 없습니다만, 이러한 메소드 체인을 기억해둘 필요가 있습니다. Enumerable의 많은 메소드들은 의도적으로 컬렉션을 리턴합니다. 따라서 서로 다른 로직을 따르는 컬렉션 처리를 연쇄적으로 사용할 수 있습니다</p>
<p>따라서 이러한 보장이 되지 않는 메소드들을 사용할 때는 특히 유의가 필요합니다. 예를 들어 아래에서 소개할 <code>select</code>는 컬렉션이 리턴되는 것이 보장되지만 유사해보이는 <code>detect</code>는 이러한 특성이 보장되지 않습니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[50]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">odd</span><span class="err">?</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[50]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[1, 3, 5]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[51]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">detect</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">odd</span><span class="err">?</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[51]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
1
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>당연한 얘기입니다만, 컬렉션이 아닌 객체에 Enumerable 메소드는 사용할 수 없습니다. 이런 식으로 메소드 체인을 구성해서는 안 됩니다. 검색 결과가 없는 예를 보면 이 이유가 좀 더 명확합니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[55]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">even</span><span class="err">?</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[55]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[56]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span><span class="o">.</span><span class="n">detect</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">even</span><span class="err">?</span><span class="p">}</span>
<span class="c"># =&gt; nil</span>
</pre></div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="블록-축약-표현">블록 축약 표현</h2>
<p>블록에서 컬렉션의 요소에 대해서 특정한 메소드를 인자없이 호출할 때는 축약표현을 사용할 수 있습니다. 예를 들어 아래 두 표현은 같습니다.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[47]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">2.8</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mf">4.99</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">{</span><span class="o">|</span><span class="n">number</span><span class="o">|</span> <span class="n">number</span><span class="o">.</span><span class="n">round</span><span class="p">}</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[47]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[1, 3, 3, 5, 5]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[48]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre><span class="p">[</span><span class="mf">1.3</span><span class="p">,</span> <span class="mf">2.8</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mf">4.99</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">]</span><span class="o">.</span><span class="n">map</span> <span class="o">&amp;</span><span class="p">:</span><span class="nb">round</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt output_prompt">
    Out[48]:</div>
<div class="box-flex1 output_subarea output_pyout">


<pre>
[1, 3, 3, 5, 5]
</pre>

</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>each_with_index each_with_object each_slice each_cons reverse_each</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>cycle</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>map / collect flat_map / collect_concat</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>grep find_all select reject</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>drop take drop_while take_while first</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>max max_by min min_by minmax minmax_by</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>sort sort_by</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>slice_before partition</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>chunk group_by zip</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>to_a / entries</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>find / detect find_index</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>count inject / reduce</p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>all? any? include? member? none? one?</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[]:
</div>
<div class="input_area box-flex1">
<div class="highlight"><pre>
</pre></div>

</div>
</div>

</div>